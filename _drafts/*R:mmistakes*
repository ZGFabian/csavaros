
R version 4.0.4 (2021-02-15) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> setwd('/home/fabian/projects/2020/jekyll/mmistakes/_drafts/')
> library(tidyverse)
── Attaching packages ────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──
✔ ggplot2 3.3.3     ✔ purrr   0.3.4
✔ tibble  3.1.0     ✔ dplyr   1.0.4
✔ tidyr   1.1.3     ✔ stringr 1.4.0
✔ readr   1.4.0     ✔ forcats 0.5.1
── Conflicts ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
> library(eurostat)
> library(sf)
Linking to GEOS 3.8.1, GDAL 3.0.4, PROJ 6.3.2
> library(countrycode)
> library(kimberlite)
> library(ggrepel)
> library(wesanderson)
> sf <- get_eurostat_geospatial(output_class = "sf", resolution = "60",
+                               nuts_level = "0")
sf at resolution 1:60 read from local file
> 
> class(sf)
[1] "sf"         "data.frame"
> 
> jhu <- as_tibble(read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/weekly_cases_per_million.csv"))
> max(jhu$date)
[1] "2021-03-14"
> cntrs <- jhu %>%
+   filter(date == "2021-03-06") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> 
> names(sf)
[1] "id"        "CNTR_CODE" "NUTS_NAME" "LEVL_CODE" "FID"       "NUTS_ID"   "geometry"  "geo"      
> head(sf)
Simple feature collection with 6 features and 7 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 2.54601 ymin: 34.56908 xmax: 34.56859 ymax: 51.50246
geographic CRS: WGS 84
  id CNTR_CODE               NUTS_NAME LEVL_CODE FID NUTS_ID                       geometry geo
1 BG        BG                БЪЛГАРИЯ         0  BG      BG MULTIPOLYGON (((22.99717 43...  BG
2 CH        CH SCHWEIZ/SUISSE/SVIZZERA         0  CH      CH MULTIPOLYGON (((8.61383 47....  CH
3 CY        CY                  ΚΥΠΡΟΣ         0  CY      CY MULTIPOLYGON (((33.75237 34...  CY
4 AL        AL               SHQIPËRIA         0  AL      AL MULTIPOLYGON (((19.831 42.4...  AL
5 CZ        CZ         ČESKÁ REPUBLIKA         0  CZ      CZ MULTIPOLYGON (((14.49122 51...  CZ
6 BE        BE        BELGIQUE-BELGIË          0  BE      BE MULTIPOLYGON (((5.10218 51....  BE
> sf$country <- countrycode(sf$CNTR_CODE, origin="eurostat",
+                            destination = "country.name")
> 
> cntrs$country
 [1] "Serbia"   "Croatia"  "Slovenia" "Austria"  "Slovakia" "Czechia"  "Poland"   "Ukraine"  "Romania"  "Hungary" 
> sf <- sf %>%
+   filter(country %in% cntrs$country)
> 
> df <- left_join(sf, cntrs, by = "country")
> 
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-06 7897.016
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-06 1726.994
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-06  853.294
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-06 3694.069
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-06 2231.640
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-06 1342.729
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-06 3813.158
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-06 2625.868
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-06 2900.556
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> library(ggsflabel)

Attaching package: ‘ggsflabel’

The following objects are masked from ‘package:ggplot2’:

    geom_sf_label, geom_sf_text, StatSfCoordinates

> pal <- wes_palette("Cavalcanti1", 37, type = "continuous")
> df %>%
+    ggplot(aes(fill = case)) +
+    scale_fill_brewer(palette = "YlGnBu") +
+    geom_sf(color = "dim grey", size = .1) +
+    geom_sf_label(aes(label = round(case, 0), color="black"))
Error: Continuous value supplied to discrete scale
In addition: Warning message:
In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+    ggplot(aes(fill = case)) +
+    scale_fill_kimberlite() +
+    geom_sf(color = "dim grey", size = .1) +
+    geom_sf_label(aes(label = round(case, 0), color="black"))
Error: Continuous value supplied to discrete scale
In addition: Warning message:
In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+    ggplot(aes(fill = as.factor=(case))) +
Error: unexpected '=' in:
"df %>%
   ggplot(aes(fill = as.factor="
>    scale_fill_kimberlite() +
+    geom_sf(color = "dim grey", size = .1) +
+    geom_sf_label(aes(label = round(case, 0), color="black"))
Error: Cannot add ggproto objects together. Did you forget to add this object to a ggplot object?
Run `rlang::last_error()` to see where the error occurred.
> df %>%
+    ggplot(aes(fill = as.factor=(case)))
Error: unexpected '=' in:
"df %>%
   ggplot(aes(fill = as.factor="
> df %>%
+    ggplot(aes(fill = as.factor(case)))
> df %>%
+    ggplot(aes(fill = as.factor(case))) +
+    scale_fill_kimberlite() +
+    geom_sf(color = "dim grey", size = .1) +
+    geom_sf_label(aes(label = round(case, 0), color="black"))
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dim grey", size = .1) +
+   geom_sf_label(aes(label = round(case, 0), color="black")) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dim grey", size = .1) +
+   geom_label(aes(label = round(case, 0), color="black")) +
+   theme(legend.position = "none")
Error: geom_label requires the following missing aesthetics: x and y
Run `rlang::last_error()` to see where the error occurred.
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dim grey", size = .1) +
+   geom_sf_label(aes(label = round(case, 0), colour = "black")) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf() +
+   geom_sf_label(aes(label = round(case, 0), colour = "black")) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0), colour = "black")) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0), colour = "white")) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> max(jhu$date)
[1] "2021-03-14"
> cntrs <- jhu %>%
+   filter(date == "2021-03-14") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> 
> names(sf)
[1] "id"        "CNTR_CODE" "NUTS_NAME" "LEVL_CODE" "FID"       "NUTS_ID"   "geometry"  "geo"       "country"  
> head(sf)
Simple feature collection with 6 features and 8 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.41254 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE       NUTS_NAME LEVL_CODE FID NUTS_ID                       geometry geo country
1 CZ        CZ ČESKÁ REPUBLIKA         0  CZ      CZ MULTIPOLYGON (((14.49122 51...  CZ Czechia
2 AT        AT      ÖSTERREICH         0  AT      AT MULTIPOLYGON (((15.54245 48...  AT Austria
3 HR        HR        HRVATSKA         0  HR      HR MULTIPOLYGON (((16.59681 46...  HR Croatia
4 HU        HU    MAGYARORSZÁG         0  HU      HU MULTIPOLYGON (((22.12108 48...  HU Hungary
5 PL        PL          POLSKA         0  PL      PL MULTIPOLYGON (((18.95003 54...  PL  Poland
6 RO        RO         ROMÂNIA         0  RO      RO MULTIPOLYGON (((27.39117 47...  RO Romania
> sf$country <- countrycode(sf$CNTR_CODE, origin="eurostat",
+                            destination = "country.name")
> 
> cntrs$country
 [1] "Serbia"   "Croatia"  "Slovenia" "Austria"  "Slovakia" "Czechia"  "Poland"   "Ukraine"  "Romania"  "Hungary" 
> sf <- sf %>%
+   filter(country %in% cntrs$country)
> 
> df <- left_join(sf, cntrs, by = "country")
> 
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> max(jhu$date)
[1] "2021-03-14"
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank()) +
+   labs(title = "COVID-19 új esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20)) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 <- df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p1
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p2 <- df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
Error: geom_col requires the following missing aesthetics: x and y
Run `rlang::last_error()` to see where the error occurred.
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> p2 <- df %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   arrange(case) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> df %>%
+   arrange(case)
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
2 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
3 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
4 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
5 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
6 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
9 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
                        geometry
1 MULTIPOLYGON (((16.59681 46...
2 MULTIPOLYGON (((27.39117 47...
3 MULTIPOLYGON (((15.54245 48...
4 MULTIPOLYGON (((16.37079 46...
5 MULTIPOLYGON (((19.88393 49...
6 MULTIPOLYGON (((18.95003 54...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((22.12108 48...
9 MULTIPOLYGON (((14.49122 51...
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> library(ggpubr)
Error in library(ggpubr) : there is no package called ‘ggpubr’
> install.packages("ggpubr")
Installing package into ‘/home/fabian/R/x86_64-pc-linux-gnu-library/4.0’
(as ‘lib’ is unspecified)
also installing the dependencies ‘corrplot’, ‘ggsci’, ‘ggsignif’, ‘polynom’, ‘rstatix’

trying URL 'https://cran.rstudio.org/src/contrib/corrplot_0.84.tar.gz'
Content type 'application/x-gzip' length 5385275 bytes (5.1 MB)
==================================================
downloaded 5.1 MB

trying URL 'https://cran.rstudio.org/src/contrib/ggsci_2.9.tar.gz'
Content type 'application/x-gzip' length 2873033 bytes (2.7 MB)
==================================================
downloaded 2.7 MB

trying URL 'https://cran.rstudio.org/src/contrib/ggsignif_0.6.1.tar.gz'
Content type 'application/x-gzip' length 227722 bytes (222 KB)
==================================================
downloaded 222 KB

trying URL 'https://cran.rstudio.org/src/contrib/polynom_1.4-0.tar.gz'
Content type 'application/x-gzip' length 243462 bytes (237 KB)
==================================================
downloaded 237 KB

trying URL 'https://cran.rstudio.org/src/contrib/rstatix_0.7.0.tar.gz'
Content type 'application/x-gzip' length 402481 bytes (393 KB)
==================================================
downloaded 393 KB

trying URL 'https://cran.rstudio.org/src/contrib/ggpubr_0.4.0.tar.gz'
Content type 'application/x-gzip' length 2689307 bytes (2.6 MB)
==================================================
downloaded 2.6 MB

* installing *source* package ‘corrplot’ ...
** package ‘corrplot’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (corrplot)
* installing *source* package ‘ggsci’ ...
** package ‘ggsci’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (ggsci)
* installing *source* package ‘ggsignif’ ...
** package ‘ggsignif’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
*** copying figures
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (ggsignif)
* installing *source* package ‘polynom’ ...
** package ‘polynom’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (polynom)
* installing *source* package ‘rstatix’ ...
** package ‘rstatix’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (rstatix)
* installing *source* package ‘ggpubr’ ...
** package ‘ggpubr’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (ggpubr)

The downloaded source packages are in
	‘/tmp/RtmpJolral/downloaded_packages’
> library(ggpubr)
> ggarrange(p1,p2)
There were 23 warnings (use warnings() to see them)
> library(tidyverse)
> library(eurostat)
> library(sf)
> library(countrycode)
> library(kimberlite)
> library(ggrepel)
> library(wesanderson)
> sf <- get_eurostat_geospatial(output_class = "sf", resolution = "60",
+                               nuts_level = "0")
sf at resolution 1:60 read from local file
> 
> class(sf)
[1] "sf"         "data.frame"
> 
> jhu <- as_tibble(read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/weekly_cases_per_million.csv"))
> max(jhu$date)
[1] "2021-03-15"
> cntrs <- jhu %>%
+   filter(date == "2021-03-14") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> 
> names(sf)
[1] "id"        "CNTR_CODE" "NUTS_NAME" "LEVL_CODE" "FID"       "NUTS_ID"   "geometry"  "geo"      
> head(sf)
Simple feature collection with 6 features and 7 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 2.54601 ymin: 34.56908 xmax: 34.56859 ymax: 51.50246
geographic CRS: WGS 84
  id CNTR_CODE               NUTS_NAME LEVL_CODE FID NUTS_ID                       geometry geo
1 BG        BG                БЪЛГАРИЯ         0  BG      BG MULTIPOLYGON (((22.99717 43...  BG
2 CH        CH SCHWEIZ/SUISSE/SVIZZERA         0  CH      CH MULTIPOLYGON (((8.61383 47....  CH
3 CY        CY                  ΚΥΠΡΟΣ         0  CY      CY MULTIPOLYGON (((33.75237 34...  CY
4 AL        AL               SHQIPËRIA         0  AL      AL MULTIPOLYGON (((19.831 42.4...  AL
5 CZ        CZ         ČESKÁ REPUBLIKA         0  CZ      CZ MULTIPOLYGON (((14.49122 51...  CZ
6 BE        BE        BELGIQUE-BELGIË          0  BE      BE MULTIPOLYGON (((5.10218 51....  BE
> sf$country <- countrycode(sf$CNTR_CODE, origin="eurostat",
+                            destination = "country.name")
> 
> cntrs$country
 [1] "Serbia"   "Croatia"  "Slovenia" "Austria"  "Slovakia" "Czechia"  "Poland"   "Ukraine"  "Romania"  "Hungary" 
> sf <- sf %>%
+   filter(country %in% cntrs$country)
> 
> df <- left_join(sf, cntrs, by = "country")
> 
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> 
> # devtools::install_github("yutannihilation/ggsflabel")
> library(ggsflabel)
> pal <- wes_palette("Cavalcanti1", 37, type = "continuous")
> p1 <- df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p1
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case)) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   scale_fill_kimberlite() +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
Scale for 'fill' is already present. Adding another scale for 'fill', which will replace the existing scale.
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case), fill = case) +
+   scale_fill_kimberlite() +
+   geom_col(color = "dimgray", size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case), fill = case) +
+   scale_fill_kimberlite() +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite() +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
Error: Continuous value supplied to discrete scale
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack")
>   theme(legend.position = "none", axis.title = element_blank()) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
List of 4
 $ axis.title     : list()
  ..- attr(*, "class")= chr [1:2] "element_blank" "element"
 $ legend.position: chr "none"
 $ title          : chr "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve"
 $ subtitle       : chr "2021-03-14, adatforrás: OWID/JHU"
 - attr(*, "class")= chr [1:2] "theme" "gg"
 - attr(*, "complete")= logi FALSE
 - attr(*, "validate")= logi TRUE
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack", legend.position = "none",
+                    axis.title = element_blank()) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
Error in theme_kimberlite(family = "Hack", legend.position = "none", axis.title = element_blank()) : 
  unused arguments (legend.position = "none", axis.title = element_blank())
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank())
>   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
$title
[1] "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve"

$subtitle
[1] "2021-03-14, adatforrás: OWID/JHU"

attr(,"class")
[1] "labels"
> p2
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> library(ggpubr)
> ggarrange(p1,p2)
There were 37 warnings (use warnings() to see them)
> library(patchwork)
> layout <- c(
+   area(t = 2, l = 1, b = 5, r = 4),
+   area(t = 1, l = 3, b = 3, r = 5)
+ )
> p1 + p2 + 
+   plot_layout(design = layout)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> plot(layout)
> layout <- c(
+   area(t = 2, l = 1, b = 5, r = 4),
+   area(t = 1, l = 4, b = 3, r = 5)
+ )
> plot(layout)
> library(patchwork)
> layout <- c(
+   area(t = 2, l = 1, b = 5, r = 4),
+   area(t = 2, l = 4, b = 4, r = 5)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> plot(layout)
> layout <- c(
+   area(t = 2, l = 1, b = 5, r = 4),
+   area(t = 2, l = 5, b = 4, r = 7)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> my_layout_matrix <- matrix(c(1, 1, 2, 3), nrow = 2, ncol = 2, byrow = TRUE)
> plot(my_layout_matrix)
> my_layout_matrix
     [,1] [,2]
[1,]    1    1
[2,]    2    3
> layout
2 patch areas, spanning 7 columns and 5 rows

    t l b r
1:  2 1 5 4
2:  2 5 4 7
> plot(layout)
> gridExtra::grid.arrange(
+     p1, p2
+     layout_matrix = my_layout_matrix
Error: unexpected symbol in:
"    p1, p2
    layout_matrix"
>   )
Error: unexpected ')' in "  )"
> gridExtra::grid.arrange(
+     p1, p2,
+     layout_matrix = my_layout_matrix
+   )
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> my_layout_matrix <- matrix(c(1, 1, 2), nrow = 1, ncol = 1)
> gridExtra::grid.arrange(
+     p1, p2,
+     layout_matrix = my_layout_matrix
+   )
Error in t:b : NA/NaN argument
In addition: Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 + p2 +
+   plot_layout(design = layout)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> layout <- c(
+   area(t = 0, l = 1, b = 5, r = 4),
+   area(t = 0, l = 5, b = 4, r = 7)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> layout <- c(
+   area(t = 0, l = 0, b = 0, r = 4),
+   area(t = 0, l = 5, b = 0, r = 7)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Error in unit(rep(0, TABLE_ROWS * dims[1]), "null") : 
  'x' and 'units' must have length > 0
In addition: Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> plot(layout)
> layout <- c(
+   area(t = 0, l = 0, b = 0, r = 4),
+   area(t = 2, l = 5, b = 2, r = 7)
+ )
> plot(layout)
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Error in grid.Call.graphics(C_setviewport, vp, TRUE) : 
  invalid 'layout.pos.row'
In addition: Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> layout <- c(
+   area(t = 0, l = 0, b = 0, r = 4),
+   area(t = 0, l = 5, b = 0, r = 7)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Error in unit(rep(0, TABLE_ROWS * dims[1]), "null") : 
  'x' and 'units' must have length > 0
In addition: Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> layout <- c(
+   area(t = 0, l = 1, b = 0, r = 4),
+   area(t = 0, l = 5, b = 0, r = 7)
+ )
> plot(layout)
> p1 + p2 +
+   plot_layout(design = layout)
Error in unit(rep(0, TABLE_ROWS * dims[1]), "null") : 
  'x' and 'units' must have length > 0
In addition: Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 <- ggplot(mtcars) + geom_point(aes(mpg, disp))
> p2 <- ggplot(mtcars) + geom_boxplot(aes(gear, disp, group = gear))
> p3 <- ggplot(mtcars) + geom_bar(aes(gear)) + facet_wrap(~cyl)
>      
>      layout <- c(
+        area(1, 1),
+        area(1, 3, 3),
+        area(3, 1, 3, 2)
+      )
>      
>      # Show the layout to make sure it looks as it should
>      plot(layout)
>      
>      # Apply it to a patchwork
>      p1 + p2 + p3 + plot_layout(design = layout)
>  plot(layout)
> p1 + p2 + p3 + plot_layout(design = layout)
>      
> p1 <- df %>%
+   ggplot(aes(fill = as.factor(case))) +
+   scale_fill_kimberlite() +
+   geom_sf(color = "dimgray", size = 0.1) +
+   geom_sf_label(aes(label = round(case, 0))) +
+   theme(legend.position = "none", axis.title = element_blank(),
+         plot.title = element_text(size = 20, family = "Hack")) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p1
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> 
> 
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = case, fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> areas <- "AAB#
+           AAB"
> 
> plot(areas)
Error in plot.window(...) : need finite 'ylim' values
In addition: Warning messages:
1: In xy.coords(x, y, xlabel, ylabel, log) : NAs introduced by coercion
2: In min(x) : no non-missing arguments to min; returning Inf
3: In max(x) : no non-missing arguments to max; returning -Inf
> areas <- "AA#
+           AAB"
> 
> plot(areas)
Error in plot.window(...) : need finite 'ylim' values
In addition: Warning messages:
1: In xy.coords(x, y, xlabel, ylabel, log) : NAs introduced by coercion
2: In min(x) : no non-missing arguments to min; returning Inf
3: In max(x) : no non-missing arguments to max; returning -Inf
> p1 + p2 +
+   plot_layout(widths = c(2, 1))
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 + p2 +
+   plot_layout(widths = c(2, 1), heights = c(1,1))
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 + p2 +
+   plot_layout(widths = c(2, 1), heights = c(2,1))
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p1 + p2 +
+   plot_layout(widths = c(2, 1), heights = c(2, 1), nrow = 1, ncol = 2)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = as.factor(case), fill = case)) +
+   scale_fill_kimberlite() +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
Error: Continuous value supplied to discrete scale
> p2 <- df %>%
+   mutate(country = fct_reorder(country, case)) %>%
+   ggplot(aes(x = country, y = as.factor(case), fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p1 + p2 +
+   plot_layout(widths = c(2, 1), heights = c(2, 1), nrow = 1, ncol = 2)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> df$geometry
Geometry set for 9 features 
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
First 5 geometries:
MULTIPOLYGON (((14.49122 51.04353, 14.50443 51....
MULTIPOLYGON (((15.54245 48.9077, 15.61357 48.8...
MULTIPOLYGON (((16.59681 46.4759, 16.65914 46.4...
MULTIPOLYGON (((22.12108 48.37831, 22.15531 48....
MULTIPOLYGON (((18.95003 54.35831, 18.95559 54....
> install.packages("CoordinateCleaner")
Installing package into ‘/home/fabian/R/x86_64-pc-linux-gnu-library/4.0’
(as ‘lib’ is unspecified)
also installing the dependencies ‘wk’, ‘uuid’, ‘oai’, ‘wellknown’, ‘conditionz’, ‘geosphere’, ‘rgbif’

trying URL 'https://cran.rstudio.org/src/contrib/wk_0.4.1.tar.gz'
Content type 'application/x-gzip' length 111779 bytes (109 KB)
==================================================
downloaded 109 KB

trying URL 'https://cran.rstudio.org/src/contrib/uuid_0.1-4.tar.gz'
Content type 'application/x-gzip' length 49544 bytes (48 KB)
==================================================
downloaded 48 KB

trying URL 'https://cran.rstudio.org/src/contrib/oai_0.3.0.tar.gz'
Content type 'application/x-gzip' length 132733 bytes (129 KB)
==================================================
downloaded 129 KB

trying URL 'https://cran.rstudio.org/src/contrib/wellknown_0.7.2.tar.gz'
Content type 'application/x-gzip' length 80341 bytes (78 KB)
==================================================
downloaded 78 KB

trying URL 'https://cran.rstudio.org/src/contrib/conditionz_0.1.0.tar.gz'
Content type 'application/x-gzip' length 7372 bytes
==================================================
downloaded 7372 bytes

trying URL 'https://cran.rstudio.org/src/contrib/geosphere_1.5-10.tar.gz'
Content type 'application/x-gzip' length 774048 bytes (755 KB)
==================================================
downloaded 755 KB

trying URL 'https://cran.rstudio.org/src/contrib/rgbif_3.5.2.tar.gz'
Content type 'application/x-gzip' length 3610973 bytes (3.4 MB)
==================================================
downloaded 3.4 MB

trying URL 'https://cran.rstudio.org/src/contrib/CoordinateCleaner_2.0-18.tar.gz'
Content type 'application/x-gzip' length 1410602 bytes (1.3 MB)
==================================================
downloaded 1.3 MB

* installing *source* package ‘wk’ ...
** package ‘wk’ successfully unpacked and MD5 sums checked
** using staged installation
** libs
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c bbox-handler.c -o bbox-handler.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c count-handler.c -o count-handler.o
g++ -std=gnu++11 -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c cpp11.cpp -o cpp11.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c debug-filter.c -o debug-filter.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-crc.c -o handle-crc.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-rct.c -o handle-rct.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-sfc.c -o handle-sfc.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-wkb.c -o handle-wkb.o
g++ -std=gnu++11 -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-wkt.cpp -o handle-wkt.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c handle-xy.c -o handle-xy.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c identity-filter.c -o identity-filter.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c meta-handler.c -o meta-handler.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c problems-handler.c -o problems-handler.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c sfc-writer.c -o sfc-writer.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c void-handler.c -o void-handler.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wk-v1.c -o wk-v1.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wkb-writer.c -o wkb-writer.o
g++ -std=gnu++11 -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wkt-writer.cpp -o wkt-writer.o
gcc -I"/usr/include/R/" -DNDEBUG -I../inst/include/ -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/cpp11/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c xy-writer.c -o xy-writer.o
g++ -std=gnu++11 -shared -L/usr/lib64/R/lib -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -o wk.so bbox-handler.o count-handler.o cpp11.o debug-filter.o handle-crc.o handle-rct.o handle-sfc.o handle-wkb.o handle-wkt.o handle-xy.o identity-filter.o meta-handler.o problems-handler.o sfc-writer.o void-handler.o wk-v1.o wkb-writer.o wkt-writer.o xy-writer.o -L/usr/lib64/R/lib -lR
installing to /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-wk/00new/wk/libs
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (wk)
* installing *source* package ‘uuid’ ...
** package ‘uuid’ successfully unpacked and MD5 sums checked
** using staged installation
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking for stdlib.h... (cached) yes
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/sockio.h usability... no
checking sys/sockio.h presence... no
checking for sys/sockio.h... no
checking sys/syscall.h usability... yes
checking sys/syscall.h presence... yes
checking for sys/syscall.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking for unistd.h... (cached) yes
checking for net/if.h... yes
checking for net/if_dl.h... no
checking for jrand48... yes
checking for flock... yes
checking for struct sockaddr.sa_len... no
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for library containing dlsym... -ldl
configure: creating ./config.status
config.status: creating src/Makevars
config.status: creating src/config.h
** libs
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c R.c -o R.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c clear.c -o clear.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c compare.c -o compare.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c copy.c -o copy.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c gen_uuid.c -o gen_uuid.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c isnull.c -o isnull.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c pack.c -o pack.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c parse.c -o parse.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c rand.c -o rand.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c unpack.c -o unpack.o
gcc -I"/usr/include/R/" -DNDEBUG -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c unparse.c -o unparse.o
gcc -shared -L/usr/lib64/R/lib -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -o uuid.so R.o clear.o compare.o copy.o gen_uuid.o isnull.o pack.o parse.o rand.o unpack.o unparse.o -ldl -L/usr/lib64/R/lib -lR
installing to /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-uuid/00new/uuid/libs
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (uuid)
* installing *source* package ‘oai’ ...
** package ‘oai’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (oai)
* installing *source* package ‘geosphere’ ...
** package ‘geosphere’ successfully unpacked and MD5 sums checked
** using staged installation
** libs
gcc -I"/usr/include/R/" -DNDEBUG   -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c dist.c -o dist.o
gcc -I"/usr/include/R/" -DNDEBUG   -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c geodesic.c -o geodesic.o
gcc -I"/usr/include/R/" -DNDEBUG   -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c geolib.c -o geolib.o
gcc -I"/usr/include/R/" -DNDEBUG   -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c geosphere_init.c -o geosphere_init.o
gcc -I"/usr/include/R/" -DNDEBUG   -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c util.c -o util.o
gcc -shared -L/usr/lib64/R/lib -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -o geosphere.so dist.o geodesic.o geolib.o geosphere_init.o util.o -L/usr/lib64/R/lib -lR
installing to /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-geosphere/00new/geosphere/libs
** R
** data
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (geosphere)
* installing *source* package ‘wellknown’ ...
** package ‘wellknown’ successfully unpacked and MD5 sums checked
** using staged installation
** libs
rm -Rf wellknown.so RcppExports.o bounding_wkt.o centroid.o reverse.o utils.o validate.o wkt_bounding.o wkt_coords.o wkt_correct.o
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c RcppExports.cpp -o RcppExports.o
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c bounding_wkt.cpp -o bounding_wkt.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from bounding_wkt.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from bounding_wkt.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from bounding_wkt.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from bounding_wkt.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c centroid.cpp -o centroid.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from centroid.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from centroid.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from centroid.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from centroid.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c reverse.cpp -o reverse.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from reverse.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from reverse.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from reverse.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from reverse.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c utils.cpp -o utils.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from utils.cpp:1:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from utils.h:1,
                 from utils.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from utils.cpp:1:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from utils.h:1,
                 from utils.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c validate.cpp -o validate.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from validate.cpp:2:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from validate.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from validate.cpp:2:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from validate.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wkt_bounding.cpp -o wkt_bounding.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from wkt_bounding.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_bounding.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from wkt_bounding.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_bounding.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wkt_coords.cpp -o wkt_coords.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from wkt_coords.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_coords.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from wkt_coords.cpp:3:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_coords.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -I"/usr/include/R/" -DNDEBUG  -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include' -I'/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include' -D_FORTIFY_SOURCE=2   -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fno-plt  -c wkt_correct.cpp -o wkt_correct.o
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/bind/mem_fn.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/mem_fn.hpp:22,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function/detail/prologue.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/function.hpp:30,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/detail/find_iterator.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/find_iterator.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/iter_find.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string/split.hpp:16,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/algorithm/string.hpp:23,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/read.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/io/wkt/wkt.hpp:17,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/cartesian/buffer_end_round.hpp:27,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/strategies/strategies.hpp:46,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:58,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from wkt_correct.cpp:2:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/get_pointer.hpp:48:40: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   48 | template<class T> T * get_pointer(std::auto_ptr<T> const& p)
      |                                        ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_correct.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
In file included from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/scoped_ptr.hpp:13,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/detail/rtree/query_iterators.hpp:18,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/index/rtree.hpp:90,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/multi_point.hpp:35,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/within/implementation.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/covered_by/implementation.hpp:25,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/covered_by.hpp:24,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffered_piece_collection.hpp:32,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/detail/buffer/buffer_inserter.hpp:29,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/algorithms/buffer.hpp:41,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry/geometry.hpp:63,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/geometry.hpp:17,
                 from def.h:3,
                 from utils.h:2,
                 from wkt_correct.cpp:2:
/home/fabian/R/x86_64-pc-linux-gnu-library/4.0/BH/include/boost/smart_ptr/scoped_ptr.hpp:74:31: warning: ‘template<class> class std::auto_ptr’ is deprecated [-Wdeprecated-declarations]
   74 |     explicit scoped_ptr( std::auto_ptr<T> p ) BOOST_SP_NOEXCEPT : px( p.release() )
      |                               ^~~~~~~~
In file included from /usr/include/c++/10.2.0/bits/locale_conv.h:41,
                 from /usr/include/c++/10.2.0/locale:43,
                 from /usr/include/c++/10.2.0/iomanip:43,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/RcppCommon.h:52,
                 from /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/Rcpp/include/Rcpp.h:27,
                 from wkt_correct.cpp:1:
/usr/include/c++/10.2.0/bits/unique_ptr.h:57:28: note: declared here
   57 |   template<typename> class auto_ptr;
      |                            ^~~~~~~~
g++ -std=gnu++14 -shared -L/usr/lib64/R/lib -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -o wellknown.so RcppExports.o bounding_wkt.o centroid.o reverse.o utils.o validate.o wkt_bounding.o wkt_coords.o wkt_correct.o -L/usr/lib64/R/lib -lR
installing to /home/fabian/R/x86_64-pc-linux-gnu-library/4.0/00LOCK-wellknown/00new/wellknown/libs
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (wellknown)
* installing *source* package ‘conditionz’ ...
** package ‘conditionz’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (conditionz)
* installing *source* package ‘rgbif’ ...
** package ‘rgbif’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
*** copying figures
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (rgbif)
* installing *source* package ‘CoordinateCleaner’ ...
** package ‘CoordinateCleaner’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Warning in fun(libname, pkgname) :
  rgeos: versions of GEOS runtime 3.8.1-CAPI-1.13.3
and GEOS at installation 3.8.0-CAPI-1.13.1differ
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
Warning in fun(libname, pkgname) :
  rgeos: versions of GEOS runtime 3.8.1-CAPI-1.13.3
and GEOS at installation 3.8.0-CAPI-1.13.1differ
** testing if installed package can be loaded from final location
Warning in fun(libname, pkgname) :
  rgeos: versions of GEOS runtime 3.8.1-CAPI-1.13.3
and GEOS at installation 3.8.0-CAPI-1.13.1differ
** testing if installed package keeps a record of temporary installation path
* DONE (CoordinateCleaner)

The downloaded source packages are in
	‘/tmp/RtmpJolral/downloaded_packages’
> library(CoordinateCleaner)
Warning message:
In fun(libname, pkgname) :
  rgeos: versions of GEOS runtime 3.8.1-CAPI-1.13.3
and GEOS at installation 3.8.0-CAPI-1.13.1differ
> ?cc_cap()
cc_cap            package:CoordinateCleaner            R Documentation

Identify Coordinates in Vicinity of Country Capitals.

Description:

     Removes or flags records within a certain radius around country
     capitals. Poorly geo-referenced occurrence records in biological
     databases are often erroneously geo-referenced to capitals.

Usage:

     cc_cap(
       x,
       lon = "decimallongitude",
       lat = "decimallatitude",
       species = "species",
       buffer = 10000,
       geod = TRUE,
       ref = NULL,
       verify = FALSE,
       value = "clean",
       verbose = TRUE
     )
     
Arguments:

       x: data.frame. Containing geographical coordinates and species
          names.

     lon: character string. The column with the longitude coordinates.
          Default = “decimallongitude”.

     lat: character string. The column with the latitude coordinates.
          Default = “decimallatitude”.

 species: character string. The column with the species identity. Only
          required if verify = TRUE.

  buffer: The buffer around each capital coordinate (the centre of the
          city), where records should be flagged as problematic. Units
          depend on geod. Default = 10 kilometres.

    geod: logical. If TRUE the radius around each capital is calculated
          based on a sphere, buffer is in meters and independent of
          latitude. If FALSE the radius is calculated assuming planar
          coordinates and varies slightly with latitude, in this case
          buffer is in degrees. Default = TRUE. See
          https://seethedatablog.wordpress.com/ for detail and credits.

     ref: SpatialPointsDataFrame. Providing the geographic gazetteer.
          Can be any SpatialPointsDataFrame, but the structure must be
          identical to ‘countryref’.  Default = ‘countryref’.

  verify: logical. If TRUE records are only flagged if they are the
          only record in a given species flagged close to a given
          reference. If FALSE, the distance is the only criterion

   value: character string.  Defining the output value. See value.

 verbose: logical. If TRUE reports the name of the test and the number
          of records flagged.

Value:

     Depending on the ‘value’ argument, either a ‘data.frame’
     containing the records considered correct by the test (“clean”) or
     a logical vector (“flagged”), with TRUE = test passed and FALSE =
     test failed/potentially problematic . Default = “clean”.

Note:

     See <URL: https://ropensci.github.io/CoordinateCleaner/> for more
     details and tutorials.

See Also:

     Other Coordinates: ‘cc_cen()’, ‘cc_coun()’, ‘cc_dupl()’,
     ‘cc_equ()’, ‘cc_gbif()’, ‘cc_inst()’, ‘cc_iucn()’, ‘cc_outl()’,
     ‘cc_sea()’, ‘cc_urb()’, ‘cc_val()’, ‘cc_zero()’

Examples:

     x <- data.frame(species = letters[1:10], 
                     decimallongitude = runif(100, -180, 180), 
                     decimallatitude = runif(100, -90,90))
     
     cc_cap(x)
     cc_cap(x, value = "flagged")
     

> ll <- read.csv(file = "~/Downloads/country_centroids_az8.csv")
> head(ll)
                      FID                             the_geom FID_ scalerank      featurecla labelrank     sovereignt
1 country_centroids_az8.1 POINT (-69.9826771125 12.5208803838)    0         3 Admin-0 country         5    Netherlands
2 country_centroids_az8.2  POINT (66.0047336558 33.8352307278)    1         1 Admin-0 country         3    Afghanistan
3 country_centroids_az8.3 POINT (17.5373676815 -12.2933605438)    2         1 Admin-0 country         3         Angola
4 country_centroids_az8.4 POINT (-63.0649892654 18.2239595023)    3         1 Admin-0 country         6 United Kingdom
5 country_centroids_az8.5  POINT (20.0498339611 41.1424498947)    4         1 Admin-0 country         6        Albania
6 country_centroids_az8.6   POINT (19.953287676 60.2148868756)    5         3 Admin-0 country         6        Finland
  sov_a3 adm0_dif level              type       admin adm0_a3 geou_dif     geounit gu_a3 su_dif     subunit su_a3
1    NL1        1     2           Country       Aruba     ABW        0       Aruba   ABW      0       Aruba   ABW
2    AFG        0     2 Sovereign country Afghanistan     AFG        0 Afghanistan   AFG      0 Afghanistan   AFG
3    AGO        0     2 Sovereign country      Angola     AGO        0      Angola   AGO      0      Angola   AGO
4    GB1        1     2        Dependency    Anguilla     AIA        0    Anguilla   AIA      0    Anguilla   AIA
5    ALB        0     2 Sovereign country     Albania     ALB        0     Albania   ALB      0     Albania   ALB
6    FI1        1     2           Country       Aland     ALD        0       Aland   ALD      0       Aland   ALD
  brk_diff        name     name_long brk_a3    brk_name brk_group abbrev postal                    formal_en formal_fr
1        0       Aruba         Aruba    ABW       Aruba            Aruba     AW                        Aruba          
2        0 Afghanistan   Afghanistan    AFG Afghanistan             Afg.     AF Islamic State of Afghanistan          
3        0      Angola        Angola    AGO      Angola             Ang.     AO  People's Republic of Angola          
4        0    Anguilla      Anguilla    AIA    Anguilla             Ang.     AI                                       
5        0     Albania       Albania    ALB     Albania             Alb.     AL          Republic of Albania          
6        0       Aland Aland Islands    ALD       Aland            Aland     AI          Ã\u0085land Islands          
  note_adm0 note_brk   name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est gdp_md_est pop_year
1     Neth.                Aruba                  4         2         2          9   103065     2258.0      -99
2                    Afghanistan                  5         6         8          7 28400000    22270.0      -99
3                         Angola                  3         2         6          1 12799293   110300.0      -99
4      U.K.             Anguilla                  6         6         6          3    14436      108.9      -99
5                        Albania                  1         4         1          6  3639453    21810.0      -99
6      Fin.                Aland                  4         1         4          6    27153     1563.0      -99
  lastcensus gdp_year                    economy              income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3
1       2010      -99       6. Developing region 2. High income: nonOECD       -99      NA     AW    ABW    533   533
2       1979      -99  7. Least developed region           5. Low income       -99      NA     AF    AFG      4     4
3       1970      -99  7. Least developed region  3. Upper middle income       -99      NA     AO    AGO     24    24
4        -99      -99       6. Developing region  3. Upper middle income       -99      NA     AI    AIA    660   660
5       2001      -99       6. Developing region  4. Lower middle income       -99      NA     AL    ALB      8     8
6        -99      -99 2. Developed region: nonG7    1. High income: OECD       -99      NA     AX    ALA    248   248
  wb_a2 wb_a3 woe_id adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb     continent region_un       subregion
1    AW   ABW    -99        ABW        ABW        -99        -99 North America  Americas       Caribbean
2    AF   AFG    -99        AFG        AFG        -99        -99          Asia      Asia   Southern Asia
3    AO   AGO    -99        AGO        AGO        -99        -99        Africa    Africa   Middle Africa
4   -99   -99    -99        AIA        AIA        -99        -99 North America  Americas       Caribbean
5    AL   ALB    -99        ALB        ALB        -99        -99        Europe    Europe Southern Europe
6   -99   -99    -99        ALA        ALD        -99        -99        Europe    Europe Northern Europe
                  region_wb name_len long_len abbrev_len tiny homepart Longitude  Latitude
1 Latin America & Caribbean        5        5          5    4      -99 -69.98268  12.52088
2                South Asia       11       11          4  -99        1  66.00473  33.83523
3        Sub-Saharan Africa        6        6          4  -99        1  17.53737 -12.29336
4 Latin America & Caribbean        8        8          4  -99      -99 -63.06499  18.22396
5     Europe & Central Asia        7        7          4  -99        1  20.04983  41.14245
6     Europe & Central Asia        5       13          5    5      -99  19.95329  60.21489
> ll <- as_tibble(ll)
> glimpse(ll)
Rows: 241
Columns: 68
$ FID        <chr> "country_centroids_az8.1", "country_centroids_az8.2", "country_centroids_az8.3", "country_centroids…
$ the_geom   <chr> "POINT (-69.9826771125 12.5208803838)", "POINT (66.0047336558 33.8352307278)", "POINT (17.537367681…
$ FID_       <int> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 38, 25, 2…
$ scalerank  <int> 3, 1, 1, 1, 1, 3, 3, 1, 1, 1, 3, 1, 5, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 1, 1, 3, 1, …
$ featurecla <chr> "Admin-0 country", "Admin-0 country", "Admin-0 country", "Admin-0 country", "Admin-0 country", "Adm…
$ labelrank  <int> 5, 3, 3, 6, 6, 6, 6, 4, 2, 6, 4, 4, 5, 6, 6, 2, 4, 5, 6, 2, 5, 3, 3, 4, 4, 2, 4, 5, 6, 4, 6, 6, 3, …
$ sovereignt <chr> "Netherlands", "Afghanistan", "Angola", "United Kingdom", "Albania", "Finland", "Andorra", "United …
$ sov_a3     <chr> "NL1", "AFG", "AGO", "GB1", "ALB", "FI1", "AND", "ARE", "ARG", "ARM", "US1", "ATA", "AU1", "FR1", "…
$ adm0_dif   <int> 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, …
$ level      <int> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ type       <chr> "Country", "Sovereign country", "Sovereign country", "Dependency", "Sovereign country", "Country", …
$ admin      <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ adm0_a3    <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ geou_dif   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ geounit    <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ gu_a3      <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ su_dif     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ subunit    <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ su_a3      <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ brk_diff   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ name       <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ name_long  <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland Islands", "Andorra", "United Arab E…
$ brk_a3     <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ brk_name   <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ brk_group  <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ abbrev     <chr> "Aruba", "Afg.", "Ang.", "Ang.", "Alb.", "Aland", "And.", "U.A.E.", "Arg.", "Arm.", "Am. Samoa", "A…
$ postal     <chr> "AW", "AF", "AO", "AI", "AL", "AI", "AND", "AE", "AR", "ARM", "AS", "AQ", "AU", "TF", "AG", "AU", "…
$ formal_en  <chr> "Aruba", "Islamic State of Afghanistan", "People's Republic of Angola", "", "Republic of Albania", …
$ formal_fr  <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ note_adm0  <chr> "Neth.", "", "", "U.K.", "", "Fin.", "", "", "", "", "U.S.A.", "", "Auz.", "Fr.", "", "", "", "", "…
$ note_brk   <chr> "", "", "", "", "", "", "", "", "", "", "", "Multiple claims held in abeyance", "", "", "", "", "",…
$ name_sort  <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ name_alt   <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ mapcolor7  <int> 4, 5, 3, 6, 1, 4, 1, 2, 3, 3, 4, 4, 1, 7, 2, 1, 3, 1, 2, 3, 1, 2, 3, 4, 1, 6, 1, 1, 7, 1, 1, 6, 1, …
$ mapcolor8  <int> 2, 6, 2, 6, 4, 1, 4, 1, 1, 1, 5, 5, 2, 5, 2, 2, 1, 6, 2, 2, 2, 1, 4, 5, 1, 6, 1, 1, 5, 1, 4, 6, 5, …
$ mapcolor9  <int> 2, 8, 6, 6, 1, 4, 1, 3, 3, 2, 1, 1, 2, 9, 5, 2, 3, 5, 5, 1, 2, 5, 7, 1, 1, 2, 2, 1, 9, 5, 5, 6, 2, …
$ mapcolor13 <int> 9, 7, 1, 3, 6, 6, 8, 3, 13, 10, 1, -99, 7, 11, 5, 7, 4, 8, 8, 8, 12, 11, 7, 8, 9, 2, 5, 2, 11, 11, …
$ pop_est    <int> 103065, 28400000, 12799293, 14436, 3639453, 27153, 83888, 4798491, 40913584, 2967004, 65628, 3802, …
$ gdp_md_est <dbl> 2258.0, 22270.0, 110300.0, 108.9, 21810.0, 1563.0, 3660.0, 184300.0, 573900.0, 18770.0, 575.3, 760.…
$ pop_year   <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ lastcensus <int> 2010, 1979, 1970, -99, 2001, -99, 1989, 2010, 2010, 2001, 2010, -99, -99, -99, 2011, 2006, 2011, 20…
$ gdp_year   <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ economy    <chr> "6. Developing region", "7. Least developed region", "7. Least developed region", "6. Developing re…
$ income_grp <chr> "2. High income: nonOECD", "5. Low income", "3. Upper middle income", "3. Upper middle income", "4.…
$ wikipedia  <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ fips_10    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ iso_a2     <chr> "AW", "AF", "AO", "AI", "AL", "AX", "AD", "AE", "AR", "AM", "AS", "AQ", "-99", "TF", "AG", "AU", "A…
$ iso_a3     <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALA", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "-99", "ATF", "…
$ iso_n3     <int> 533, 4, 24, 660, 8, 248, 20, 784, 32, 51, 16, 10, 36, 260, 28, 36, 40, 31, 108, 56, 204, 854, 50, 1…
$ un_a3      <int> 533, 4, 24, 660, 8, 248, 20, 784, 32, 51, 16, -99, -99, -99, 28, 36, 40, 31, 108, 56, 204, 854, 50,…
$ wb_a2      <chr> "AW", "AF", "AO", "-99", "AL", "-99", "AD", "AE", "AR", "AM", "AS", "-99", "-99", "-99", "AG", "AU"…
$ wb_a3      <chr> "ABW", "AFG", "AGO", "-99", "ALB", "-99", "ADO", "ARE", "ARG", "ARM", "ASM", "-99", "-99", "-99", "…
$ woe_id     <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ adm0_a3_is <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALA", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "AUS", "ATF", "…
$ adm0_a3_us <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ adm0_a3_un <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ adm0_a3_wb <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ continent  <chr> "North America", "Asia", "Africa", "North America", "Europe", "Europe", "Europe", "Asia", "South Am…
$ region_un  <chr> "Americas", "Asia", "Africa", "Americas", "Europe", "Europe", "Europe", "Asia", "Americas", "Asia",…
$ subregion  <chr> "Caribbean", "Southern Asia", "Middle Africa", "Caribbean", "Southern Europe", "Northern Europe", "…
$ region_wb  <chr> "Latin America & Caribbean", "South Asia", "Sub-Saharan Africa", "Latin America & Caribbean", "Euro…
$ name_len   <int> 5, 11, 6, 8, 7, 5, 7, 20, 9, 7, 14, 10, 23, 22, 17, 9, 7, 10, 7, 7, 5, 12, 10, 8, 7, 6, 7, 16, 13, …
$ long_len   <int> 5, 11, 6, 8, 7, 13, 7, 20, 9, 7, 14, 10, 27, 35, 19, 9, 7, 10, 7, 7, 5, 12, 10, 8, 7, 6, 7, 22, 16,…
$ abbrev_len <int> 5, 4, 4, 4, 4, 5, 4, 6, 4, 4, 9, 4, 7, 10, 6, 4, 5, 4, 4, 5, 5, 4, 5, 5, 5, 4, 4, 4, 6, 5, 6, 5, 7,…
$ tiny       <int> 4, -99, -99, -99, -99, 5, 5, -99, -99, -99, 3, -99, -99, 2, 4, -99, -99, -99, -99, -99, -99, -99, -…
$ homepart   <int> -99, 1, 1, -99, 1, -99, 1, 1, 1, 1, -99, 1, -99, -99, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, -99…
$ Longitude  <dbl> -69.982677, 66.004734, 17.537368, -63.064989, 20.049834, 19.953288, 1.560544, 54.300167, -65.179807…
$ Latitude   <dbl> 12.520880, 33.835231, -12.293361, 18.223959, 41.142450, 60.214887, 42.542291, 23.905282, -35.381349…
> ll %>%
+   select(name, Longitude, Latitude) %>%
+   filter(name %in% df$country)
# A tibble: 8 x 3
  name     Longitude Latitude
  <chr>        <dbl>    <dbl>
1 Austria       14.1     47.6
2 Croatia       16.4     45.1
3 Hungary       19.4     47.2
4 Poland        19.4     52.1
5 Romania       25.0     45.9
6 Serbia        20.8     44.2
7 Slovakia      19.5     48.7
8 Slovenia      14.8     46.1
> ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(name %in% df$country)
Error: Problem with `filter()` input `..1`.
✖ object 'name' not found
ℹ Input `..1` is `name %in% df$country`.
Run `rlang::last_error()` to see where the error occurred.
> ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country)
# A tibble: 8 x 3
  country  Longitude Latitude
  <chr>        <dbl>    <dbl>
1 Austria       14.1     47.6
2 Croatia       16.4     45.1
3 Hungary       19.4     47.2
4 Poland        19.4     52.1
5 Romania       25.0     45.9
6 Serbia        20.8     44.2
7 Slovakia      19.5     48.7
8 Slovenia      14.8     46.1
> df2 <- left_join(df, ll, by = "country")
Error: Join columns must be present in data.
✖ Problem with `country`.
Run `rlang::last_error()` to see where the error occurred.
> ll <- ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country)
> 
> df2 <- left_join(df, ll, by = "country")
> df2
Simple feature collection with 9 features and 12 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case Longitude
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980        NA
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873  14.12648
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704  16.40413
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759  19.39559
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863  19.39013
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565  24.97293
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937  20.78958
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866  14.80444
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968  19.47905
  Latitude                       geometry
1       NA MULTIPOLYGON (((14.49122 51...
2 47.58549 MULTIPOLYGON (((15.54245 48...
3 45.08048 MULTIPOLYGON (((16.59681 46...
4 47.16278 MULTIPOLYGON (((22.12108 48...
5 52.12760 MULTIPOLYGON (((18.95003 54...
6 45.85243 MULTIPOLYGON (((27.39117 47...
7 44.22150 MULTIPOLYGON (((19.6981 46....
8 46.11555 MULTIPOLYGON (((16.37079 46...
9 48.70548 MULTIPOLYGON (((19.88393 49...
> p2 <- df2 %>%
+   mutate(country = fct_reorder(country, Longitude)) %>%
+   ggplot(aes(x = country, y = as.factor(case), fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p2 <- df2 %>%
+   mutate(country = fct_reorder(country, Latitude)) %>%
+   ggplot(aes(x = country, y = as.factor(case), fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> p1 + p2 +
+   plot_layout(widths = c(2, 1), heights = c(2, 1), nrow = 1, ncol = 2)
Warning messages:
1: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
2: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
3: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
4: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
5: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
6: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
7: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
8: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
9: In st_point_on_surface.sfc(data$geometry) :
  st_point_on_surface may not give correct results for longitude/latitude data
> p2 <- df2 %>%
+   mutate(country = fct_reorder(country, Latitude)) %>%
+   ggplot(aes(x = country, y = as.factor(Latitude), fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> df
Simple feature collection with 9 features and 10 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968
                        geometry
1 MULTIPOLYGON (((14.49122 51...
2 MULTIPOLYGON (((15.54245 48...
3 MULTIPOLYGON (((16.59681 46...
4 MULTIPOLYGON (((22.12108 48...
5 MULTIPOLYGON (((18.95003 54...
6 MULTIPOLYGON (((27.39117 47...
7 MULTIPOLYGON (((19.6981 46....
8 MULTIPOLYGON (((16.37079 46...
9 MULTIPOLYGON (((19.88393 49...
> ll <- read.csv(file = "~/Downloads/country_centroids_az8.csv")
> ll <- as_tibble(ll)
> glimpse(ll)
Rows: 241
Columns: 68
$ FID        <chr> "country_centroids_az8.1", "country_centroids_az8.2", "country_centroids_az8.3", "country_centroids…
$ the_geom   <chr> "POINT (-69.9826771125 12.5208803838)", "POINT (66.0047336558 33.8352307278)", "POINT (17.537367681…
$ FID_       <int> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 38, 25, 2…
$ scalerank  <int> 3, 1, 1, 1, 1, 3, 3, 1, 1, 1, 3, 1, 5, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 1, 1, 3, 1, …
$ featurecla <chr> "Admin-0 country", "Admin-0 country", "Admin-0 country", "Admin-0 country", "Admin-0 country", "Adm…
$ labelrank  <int> 5, 3, 3, 6, 6, 6, 6, 4, 2, 6, 4, 4, 5, 6, 6, 2, 4, 5, 6, 2, 5, 3, 3, 4, 4, 2, 4, 5, 6, 4, 6, 6, 3, …
$ sovereignt <chr> "Netherlands", "Afghanistan", "Angola", "United Kingdom", "Albania", "Finland", "Andorra", "United …
$ sov_a3     <chr> "NL1", "AFG", "AGO", "GB1", "ALB", "FI1", "AND", "ARE", "ARG", "ARM", "US1", "ATA", "AU1", "FR1", "…
$ adm0_dif   <int> 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, …
$ level      <int> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ type       <chr> "Country", "Sovereign country", "Sovereign country", "Dependency", "Sovereign country", "Country", …
$ admin      <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ adm0_a3    <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ geou_dif   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ geounit    <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ gu_a3      <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ su_dif     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ subunit    <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ su_a3      <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ brk_diff   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ name       <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ name_long  <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland Islands", "Andorra", "United Arab E…
$ brk_a3     <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ brk_name   <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ brk_group  <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ abbrev     <chr> "Aruba", "Afg.", "Ang.", "Ang.", "Alb.", "Aland", "And.", "U.A.E.", "Arg.", "Arm.", "Am. Samoa", "A…
$ postal     <chr> "AW", "AF", "AO", "AI", "AL", "AI", "AND", "AE", "AR", "ARM", "AS", "AQ", "AU", "TF", "AG", "AU", "…
$ formal_en  <chr> "Aruba", "Islamic State of Afghanistan", "People's Republic of Angola", "", "Republic of Albania", …
$ formal_fr  <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ note_adm0  <chr> "Neth.", "", "", "U.K.", "", "Fin.", "", "", "", "", "U.S.A.", "", "Auz.", "Fr.", "", "", "", "", "…
$ note_brk   <chr> "", "", "", "", "", "", "", "", "", "", "", "Multiple claims held in abeyance", "", "", "", "", "",…
$ name_sort  <chr> "Aruba", "Afghanistan", "Angola", "Anguilla", "Albania", "Aland", "Andorra", "United Arab Emirates"…
$ name_alt   <chr> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",…
$ mapcolor7  <int> 4, 5, 3, 6, 1, 4, 1, 2, 3, 3, 4, 4, 1, 7, 2, 1, 3, 1, 2, 3, 1, 2, 3, 4, 1, 6, 1, 1, 7, 1, 1, 6, 1, …
$ mapcolor8  <int> 2, 6, 2, 6, 4, 1, 4, 1, 1, 1, 5, 5, 2, 5, 2, 2, 1, 6, 2, 2, 2, 1, 4, 5, 1, 6, 1, 1, 5, 1, 4, 6, 5, …
$ mapcolor9  <int> 2, 8, 6, 6, 1, 4, 1, 3, 3, 2, 1, 1, 2, 9, 5, 2, 3, 5, 5, 1, 2, 5, 7, 1, 1, 2, 2, 1, 9, 5, 5, 6, 2, …
$ mapcolor13 <int> 9, 7, 1, 3, 6, 6, 8, 3, 13, 10, 1, -99, 7, 11, 5, 7, 4, 8, 8, 8, 12, 11, 7, 8, 9, 2, 5, 2, 11, 11, …
$ pop_est    <int> 103065, 28400000, 12799293, 14436, 3639453, 27153, 83888, 4798491, 40913584, 2967004, 65628, 3802, …
$ gdp_md_est <dbl> 2258.0, 22270.0, 110300.0, 108.9, 21810.0, 1563.0, 3660.0, 184300.0, 573900.0, 18770.0, 575.3, 760.…
$ pop_year   <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ lastcensus <int> 2010, 1979, 1970, -99, 2001, -99, 1989, 2010, 2010, 2001, 2010, -99, -99, -99, 2011, 2006, 2011, 20…
$ gdp_year   <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ economy    <chr> "6. Developing region", "7. Least developed region", "7. Least developed region", "6. Developing re…
$ income_grp <chr> "2. High income: nonOECD", "5. Low income", "3. Upper middle income", "3. Upper middle income", "4.…
$ wikipedia  <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ fips_10    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ iso_a2     <chr> "AW", "AF", "AO", "AI", "AL", "AX", "AD", "AE", "AR", "AM", "AS", "AQ", "-99", "TF", "AG", "AU", "A…
$ iso_a3     <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALA", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "-99", "ATF", "…
$ iso_n3     <int> 533, 4, 24, 660, 8, 248, 20, 784, 32, 51, 16, 10, 36, 260, 28, 36, 40, 31, 108, 56, 204, 854, 50, 1…
$ un_a3      <int> 533, 4, 24, 660, 8, 248, 20, 784, 32, 51, 16, -99, -99, -99, 28, 36, 40, 31, 108, 56, 204, 854, 50,…
$ wb_a2      <chr> "AW", "AF", "AO", "-99", "AL", "-99", "AD", "AE", "AR", "AM", "AS", "-99", "-99", "-99", "AG", "AU"…
$ wb_a3      <chr> "ABW", "AFG", "AGO", "-99", "ALB", "-99", "ADO", "ARE", "ARG", "ARM", "ASM", "-99", "-99", "-99", "…
$ woe_id     <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ adm0_a3_is <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALA", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "AUS", "ATF", "…
$ adm0_a3_us <chr> "ABW", "AFG", "AGO", "AIA", "ALB", "ALD", "AND", "ARE", "ARG", "ARM", "ASM", "ATA", "ATC", "ATF", "…
$ adm0_a3_un <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ adm0_a3_wb <int> -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99, -99,…
$ continent  <chr> "North America", "Asia", "Africa", "North America", "Europe", "Europe", "Europe", "Asia", "South Am…
$ region_un  <chr> "Americas", "Asia", "Africa", "Americas", "Europe", "Europe", "Europe", "Asia", "Americas", "Asia",…
$ subregion  <chr> "Caribbean", "Southern Asia", "Middle Africa", "Caribbean", "Southern Europe", "Northern Europe", "…
$ region_wb  <chr> "Latin America & Caribbean", "South Asia", "Sub-Saharan Africa", "Latin America & Caribbean", "Euro…
$ name_len   <int> 5, 11, 6, 8, 7, 5, 7, 20, 9, 7, 14, 10, 23, 22, 17, 9, 7, 10, 7, 7, 5, 12, 10, 8, 7, 6, 7, 16, 13, …
$ long_len   <int> 5, 11, 6, 8, 7, 13, 7, 20, 9, 7, 14, 10, 27, 35, 19, 9, 7, 10, 7, 7, 5, 12, 10, 8, 7, 6, 7, 22, 16,…
$ abbrev_len <int> 5, 4, 4, 4, 4, 5, 4, 6, 4, 4, 9, 4, 7, 10, 6, 4, 5, 4, 4, 5, 5, 4, 5, 5, 5, 4, 4, 4, 6, 5, 6, 5, 7,…
$ tiny       <int> 4, -99, -99, -99, -99, 5, 5, -99, -99, -99, 3, -99, -99, 2, 4, -99, -99, -99, -99, -99, -99, -99, -…
$ homepart   <int> -99, 1, 1, -99, 1, -99, 1, 1, 1, 1, -99, 1, -99, -99, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, -99…
$ Longitude  <dbl> -69.982677, 66.004734, 17.537368, -63.064989, 20.049834, 19.953288, 1.560544, 54.300167, -65.179807…
$ Latitude   <dbl> 12.520880, 33.835231, -12.293361, 18.223959, 41.142450, 60.214887, 42.542291, 23.905282, -35.381349…
> grep("C*", unique(ll$name))
  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  25  26  27  28
 [29]  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56
 [57]  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84
 [85]  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 109 110 111 112
[113] 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140
[141] 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168
[169] 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196
[197] 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224
[225] 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241
> grep("C*", unique(ll$name), value = TRUE)
  [1] "Aruba"                     "Afghanistan"               "Angola"                    "Anguilla"                 
  [5] "Albania"                   "Aland"                     "Andorra"                   "United Arab Emirates"     
  [9] "Argentina"                 "Armenia"                   "American Samoa"            "Antarctica"               
 [13] "Ashmore and Cartier Is."   "Fr. S. Antarctic Lands"    "Antigua and Barb."         "Australia"                
 [17] "Austria"                   "Azerbaijan"                "Burundi"                   "Belgium"                  
 [21] "Benin"                     "Burkina Faso"              "Bangladesh"                "Bulgaria"                 
 [25] "Bahrain"                   "Canada"                    "Bahamas"                   "Bosnia and Herz."         
 [29] "St-BarthÃ©lemy"            "Belarus"                   "Belize"                    "Bermuda"                  
 [33] "Bolivia"                   "Brazil"                    "Barbados"                  "Brunei"                   
 [37] "Bhutan"                    "Botswana"                  "Central African Rep."      "Switzerland"              
 [41] "Chile"                     "China"                     "CÃ´te d'Ivoire"            "Cameroon"                 
 [45] "Dem. Rep. Congo"           "Congo"                     "Cook Is."                  "Colombia"                 
 [49] "Comoros"                   "Cape Verde"                "Costa Rica"                "Cuba"                     
 [53] "CuraÃ§ao"                  "Cayman Is."                "N. Cyprus"                 "Cyprus"                   
 [57] "Czech Rep."                "Germany"                   "Djibouti"                  "Dominica"                 
 [61] "Denmark"                   "Dominican Rep."            "Algeria"                   "Ecuador"                  
 [65] "Egypt"                     "Eritrea"                   "Spain"                     "Estonia"                  
 [69] "Ethiopia"                  "Finland"                   "Fiji"                      "Falkland Is."             
 [73] "France"                    "Faeroe Is."                "Micronesia"                "Gabon"                    
 [77] "United Kingdom"            "Georgia"                   "Guernsey"                  "Ghana"                    
 [81] "Guinea"                    "Gambia"                    "Guinea-Bissau"             "Eq. Guinea"               
 [85] "Greece"                    "Grenada"                   "Greenland"                 "Guatemala"                
 [89] "Guam"                      "Guyana"                    "Hong Kong"                 "Heard I. and McDonald Is."
 [93] "Honduras"                  "Croatia"                   "Haiti"                     "Hungary"                  
 [97] "Indonesia"                 "Isle of Man"               "India"                     "Indian Ocean Ter."        
[101] "Br. Indian Ocean Ter."     "Ireland"                   "Iran"                      "Iraq"                     
[105] "Iceland"                   "Israel"                    "Italy"                     "Jamaica"                  
[109] "Jersey"                    "Jordan"                    "Japan"                     "Siachen Glacier"          
[113] "Kazakhstan"                "Kenya"                     "Kyrgyzstan"                "Cambodia"                 
[117] "Kiribati"                  "St. Kitts and Nevis"       "Korea"                     "Kosovo"                   
[121] "Kuwait"                    "Lao PDR"                   "Lebanon"                   "Liberia"                  
[125] "Libya"                     "Saint Lucia"               "Liechtenstein"             "Sri Lanka"                
[129] "Lesotho"                   "Lithuania"                 "Luxembourg"                "Latvia"                   
[133] "Macao"                     "St-Martin"                 "Morocco"                   "Monaco"                   
[137] "Moldova"                   "Madagascar"                "Maldives"                  "Mexico"                   
[141] "Marshall Is."              "Macedonia"                 "Mali"                      "Malta"                    
[145] "Myanmar"                   "Montenegro"                "Mongolia"                  "N. Mariana Is."           
[149] "Mozambique"                "Mauritania"                "Montserrat"                "Mauritius"                
[153] "Malawi"                    "Malaysia"                  "Namibia"                   "New Caledonia"            
[157] "Niger"                     "Norfolk Island"            "Nigeria"                   "Nicaragua"                
[161] "Niue"                      "Netherlands"               "Norway"                    "Nepal"                    
[165] "Nauru"                     "New Zealand"               "Oman"                      "Pakistan"                 
[169] "Panama"                    "Pitcairn Is."              "Peru"                      "Philippines"              
[173] "Palau"                     "Papua New Guinea"          "Poland"                    "Puerto Rico"              
[177] "Dem. Rep. Korea"           "Portugal"                  "Paraguay"                  "Palestine"                
[181] "Fr. Polynesia"             "Qatar"                     "Romania"                   "Russia"                   
[185] "Rwanda"                    "W. Sahara"                 "Saudi Arabia"              "Sudan"                    
[189] "S. Sudan"                  "Senegal"                   "Singapore"                 "S. Geo. and S. Sandw. Is."
[193] "Saint Helena"              "Solomon Is."               "Sierra Leone"              "El Salvador"              
[197] "San Marino"                "Somaliland"                "Somalia"                   "St. Pierre and Miquelon"  
[201] "Serbia"                    "SÃ£o TomÃ© and Principe"   "Suriname"                  "Slovakia"                 
[205] "Slovenia"                  "Sweden"                    "Swaziland"                 "Sint Maarten"             
[209] "Seychelles"                "Syria"                     "Turks and Caicos Is."      "Chad"                     
[213] "Togo"                      "Thailand"                  "Tajikistan"                "Turkmenistan"             
[217] "Timor-Leste"               "Tonga"                     "Trinidad and Tobago"       "Tunisia"                  
[221] "Turkey"                    "Taiwan"                    "Tanzania"                  "Uganda"                   
[225] "Ukraine"                   "Uruguay"                   "United States"             "Uzbekistan"               
[229] "Vatican"                   "St. Vin. and Gren."        "Venezuela"                 "British Virgin Is."       
[233] "U.S. Virgin Is."           "Vietnam"                   "Vanuatu"                   "Wallis and Futuna Is."    
[237] "Samoa"                     "Yemen"                     "South Africa"              "Zambia"                   
[241] "Zimbabwe"                 
> ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country, "Czech Rep.")
Error: Problem with `filter()` input `..2`.
✖ Input `..2` must be a logical vector, not a character.
ℹ Input `..2` is `"Czech Rep."`.
Run `rlang::last_error()` to see where the error occurred.
> ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country & country == "Czech Rep.")
# A tibble: 0 x 3
# … with 3 variables: country <chr>, Longitude <dbl>, Latitude <dbl>
> ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country | country == "Czech Rep.")
# A tibble: 9 x 3
  country    Longitude Latitude
  <chr>          <dbl>    <dbl>
1 Austria         14.1     47.6
2 Czech Rep.      15.3     49.7
3 Croatia         16.4     45.1
4 Hungary         19.4     47.2
5 Poland          19.4     52.1
6 Romania         25.0     45.9
7 Serbia          20.8     44.2
8 Slovakia        19.5     48.7
9 Slovenia        14.8     46.1
> ll2 <- ll %>%
+   select(country = name, Longitude, Latitude) %>%
+   filter(country %in% df$country | country == "Czech Rep.")
> ll2[ll2$country == "Czech Rep."]
Error: Must subset columns with a valid subscript vector.
ℹ Logical subscripts must match the size of the indexed input.
✖ Input has size 3 but subscript `ll2$country == "Czech Rep."` has size 9.
Run `rlang::last_error()` to see where the error occurred.
> ll2(ll2$country == "Czech Rep.")
Error in ll2(ll2$country == "Czech Rep.") : could not find function "ll2"
> ll2[(ll2$country == "Czech Rep.")]
Error: Must subset columns with a valid subscript vector.
ℹ Logical subscripts must match the size of the indexed input.
✖ Input has size 3 but subscript `(ll2$country == "Czech Rep.")` has size 9.
Run `rlang::last_error()` to see where the error occurred.
> ll2[(ll2$country == "Czech Rep."),]
# A tibble: 1 x 3
  country    Longitude Latitude
  <chr>          <dbl>    <dbl>
1 Czech Rep.      15.3     49.7
> ll2[(ll2$country == "Czech Rep."),]$Latitude
[1] 49.73341
> ll2[(ll2$country == "Czech Rep."),]$country
[1] "Czech Rep."
> ll2[(ll2$country == "Czech Rep."),]$country <- "Czechia"
> df2 <- left_join(df, ll2, by = "country")
> 
> df2
Simple feature collection with 9 features and 12 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: 9.53075 ymin: 42.23523 xmax: 29.70233 ymax: 54.8335
geographic CRS: WGS 84
  id CNTR_CODE                          NUTS_NAME LEVL_CODE FID NUTS_ID geo  country       date     case Longitude
1 CZ        CZ                    ČESKÁ REPUBLIKA         0  CZ      CZ  CZ  Czechia 2021-03-14 7259.980  15.31240
2 AT        AT                         ÖSTERREICH         0  AT      AT  AT  Austria 2021-03-14 2053.873  14.12648
3 HR        HR                           HRVATSKA         0  HR      HR  HR  Croatia 2021-03-14 1103.704  16.40413
4 HU        HU                       MAGYARORSZÁG         0  HU      HU  HU  Hungary 2021-03-14 5224.759  19.39559
5 PL        PL                             POLSKA         0  PL      PL  PL   Poland 2021-03-14 2951.863  19.39013
6 RO        RO                            ROMÂNIA         0  RO      RO  RO  Romania 2021-03-14 1633.565  24.97293
7 RS        RS REPUBLIKA SRBIJA /РЕПУБЛИКА СРБИЈА         0  RS      RS  RS   Serbia 2021-03-14 4531.937  20.78958
8 SI        SI                          SLOVENIJA         0  SI      SI  SI Slovenia 2021-03-14 2359.866  14.80444
9 SK        SK                          SLOVENSKO         0  SK      SK  SK Slovakia 2021-03-14 2584.968  19.47905
  Latitude                       geometry
1 49.73341 MULTIPOLYGON (((14.49122 51...
2 47.58549 MULTIPOLYGON (((15.54245 48...
3 45.08048 MULTIPOLYGON (((16.59681 46...
4 47.16278 MULTIPOLYGON (((22.12108 48...
5 52.12760 MULTIPOLYGON (((18.95003 54...
6 45.85243 MULTIPOLYGON (((27.39117 47...
7 44.22150 MULTIPOLYGON (((19.6981 46....
8 46.11555 MULTIPOLYGON (((16.37079 46...
9 48.70548 MULTIPOLYGON (((19.88393 49...
> p2 <- df2 %>%
+   mutate(country = fct_reorder(country, Latitude)) %>%
+   ggplot(aes(x = country, y = as.factor(Latitude), fill = case)) +
+   scale_fill_kimberlite(discrete = FALSE) +
+   geom_col(size = 0.1) +
+   coord_flip() +
+   geom_label(aes(label = round(case, 0))) +
+   theme_kimberlite(family = "Hack") +
+   theme(legend.position = "none",
+         axis.title = element_blank()) +
+   labs(# title = "Új COVID-19 esetek az előző hét napban összesítve egy millió főre vetítve",
+        subtitle = "2021-03-14, adatforrás: OWID/JHU")
> p2
> library(tidyverse)
> library("rnaturalearthdata")
> library("rnaturalearth")

Attaching package: ‘rnaturalearth’

The following object is masked from ‘package:rnaturalearthdata’:

    countries110

> energy_types <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-08-04/energy_types.csv')

── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────────────────────
cols(
  country = col_character(),
  country_name = col_character(),
  type = col_character(),
  level = col_character(),
  `2016` = col_double(),
  `2017` = col_double(),
  `2018` = col_double()
)

> country_totals <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-08-04/country_totals.csv')

── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────────────────────
cols(
  country = col_character(),
  country_name = col_character(),
  type = col_character(),
  level = col_character(),
  `2016` = col_double(),
  `2017` = col_double(),
  `2018` = col_double()
)

> centroids <- read_csv("data/country_centroids_az8.csv") %>% select(iso_a2,Longitude,Latitude)
Error: 'data/country_centroids_az8.csv' does not exist in current working directory ('/home/fabian/projects/2020/jekyll/mmistakes/_drafts').
> world <- ne_countries(scale = "medium", returnclass = "sf")
> centroids <- read_csv("data/country_centroids_az8.csv") %>% select(iso_a2,Longitude,Latitude)
Error: 'data/country_centroids_az8.csv' does not exist in current working directory ('/home/fabian/projects/2020/jekyll/mmistakes/_drafts').
> centroids <- read_csv("./data/country_centroids_az8.csv") %>% select(iso_a2,Longitude,Latitude)
Error: './data/country_centroids_az8.csv' does not exist in current working directory ('/home/fabian/projects/2020/jekyll/mmistakes/_drafts').
> setwd("/home/fabian/projects/2020/blog/solar-energy/")
> centroids <- read_csv("./data/country_centroids_az8.csv") %>% select(iso_a2,Longitude,Latitude)

── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────────────────────
cols(
  .default = col_character(),
  FID_ = col_double(),
  scalerank = col_double(),
  labelrank = col_double(),
  adm0_dif = col_double(),
  level = col_double(),
  geou_dif = col_double(),
  su_dif = col_double(),
  brk_diff = col_double(),
  mapcolor7 = col_double(),
  mapcolor8 = col_double(),
  mapcolor9 = col_double(),
  mapcolor13 = col_double(),
  pop_est = col_double(),
  gdp_md_est = col_double(),
  pop_year = col_double(),
  lastcensus = col_double(),
  gdp_year = col_double(),
  wikipedia = col_double(),
  fips_10 = col_logical(),
  woe_id = col_double()
  # ... with 9 more columns
)
ℹ Use `spec()` for the full column specifications.

> world <- ne_countries(scale = "medium", returnclass = "sf")
> total_country <- energy_types %>%
+   filter(level == "Level 1") %>%
+   group_by(country) %>%
+   summarize(total_avg = (sum(`2016`) + sum(`2017`) + sum(`2018`))/3)
> solar <- energy_types %>%
+   filter(type == "Solar") %>%
+   left_join(total_country, by = c("country")) %>%
+   mutate(avg_solar = (`2016` + `2017` + `2018`)/3,
+     country = case_when(country == "UK" ~ "GB",
+       country == "EL" ~ "GR",
+       TRUE ~ country),
+     vjust_value = case_when(country %in% c("UA","SI","BA","AT","HR") ~ 0,
+       TRUE ~ 1)) %>%
+   left_join(centroids,by = c("country" = "iso_a2")) %>%
+   mutate(pct_solar = avg_solar/total_avg)
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa")
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70))
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar))
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060")
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222")
> 
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060")
> 
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060")
> scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c(""))
Error: Cannot add ggproto objects together. Did you forget to add this object to a ggplot object?
Run `rlang::last_error()` to see where the error occurred.
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060") +
+   scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c(""))
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060") +
+   scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c("")) +
+   scale_color_gradient2(low = "#00222e",high = "#feb24c")
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060") +
+   scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c("")) +
+   scale_color_gradient2(low = "#00222e",high = "#feb24c") +
+   guides(color = FALSE)
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060") +
+   scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c("")) +
+   scale_color_gradient2(low = "#00222e",high = "#feb24c") +
+   guides(color = FALSE) +
+   labs(x = "",y = "",
+     title = "Sun is up?",
+     caption = "@perspectivalean\n#TidyTuesday\nData:Eurostat") +
+   theme_minimal()
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% solar$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = solar,aes(x = Longitude, y = Latitude ,color = pct_solar)) +
+   #Percentage doubled to get more width in plot and see the labels better.
+   geom_segment(data = solar, aes(x = Longitude,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),alpha = 0.2,linetype = "dashed",color = "#606060") +
+   geom_segment(data = solar, aes(x = 50,y = Latitude,yend = Latitude,xend = 50 + pct_solar*200),color = "#222222") +
+   geom_text(data = solar %>% filter(pct_solar > 0),aes(x = 50 + pct_solar*200,y = Latitude,label = country,vjust = vjust_value),hjust = 0,size = 2.5,color = "#606060") +
+   annotate(geom = "text", x = 5, y = 32, label = "*Average percentage of solar energy (2017-19)\n Latitude based on country centroids\nCountries with 0% don't have a bar",size = 2,color = "#606060") +
+   scale_x_continuous(breaks = c(50, 60,70),
+     labels = c("0% \nSolar energy*", "5%","10%")) +
+   scale_y_continuous( breaks = c(30),
+     labels = c("")) +
+   scale_color_gradient2(low = "#00222e",high = "#feb24c") +
+   guides(color = FALSE) +
+   labs(x = "",y = "",
+     title = "Sun is up?",
+     caption = "@perspectivalean\n#TidyTuesday\nData:Eurostat") +
+   theme_minimal() +
+   theme(plot.background = element_rect(fill = "#aadfed",color = "#aadfed"),
+     panel.background = element_rect(fill = "#aadfed",color =  "#aadfed"))
> library(tidyverse)
> getwd()
[1] "/home/fabian/projects/2020/blog/solar-energy"
> setwd("/home/fabian/projects/2020/jekyll/mmistakes/_drafts/")
> library("rnaturalearthdata")
> library("rnaturalearth")
> centroids <- read_csv("/home/fabian/projects/2020/blog/solar-energy/data/country_centroids_az8.csv") %>% select(iso_a2,Longitude,Latitude)

── Column specification ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
cols(
  .default = col_character(),
  FID_ = col_double(),
  scalerank = col_double(),
  labelrank = col_double(),
  adm0_dif = col_double(),
  level = col_double(),
  geou_dif = col_double(),
  su_dif = col_double(),
  brk_diff = col_double(),
  mapcolor7 = col_double(),
  mapcolor8 = col_double(),
  mapcolor9 = col_double(),
  mapcolor13 = col_double(),
  pop_est = col_double(),
  gdp_md_est = col_double(),
  pop_year = col_double(),
  lastcensus = col_double(),
  gdp_year = col_double(),
  wikipedia = col_double(),
  fips_10 = col_logical(),
  woe_id = col_double()
  # ... with 9 more columns
)
ℹ Use `spec()` for the full column specifications.

> world <- ne_countries(scale = "medium", returnclass = "sf")
> plot(world)
Warning message:
plotting the first 10 out of 94 attributes; use max.plot = 94 to plot all 
> jhu <- as_tibble(read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/weekly_cases_per_million.csv"))
> max(jhu$date)
[1] "2021-03-15"
> cntrs <- jhu %>%
+   filter(date == "2021-03-14") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> ggplot() +
+   geom_sf(data = world %>% filter(iso_a2 %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70))
> head(world)
Simple feature collection with 6 features and 94 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -73.36621 ymin: -22.40205 xmax: 109.4449 ymax: 41.9062
CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
       featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level              type     admin adm0_a3 geou_dif
0 Admin-0 country         1         3   Zimbabwe    ZWE        0     2 Sovereign country  Zimbabwe     ZWE        0
1 Admin-0 country         1         3     Zambia    ZMB        0     2 Sovereign country    Zambia     ZMB        0
2 Admin-0 country         1         3      Yemen    YEM        0     2 Sovereign country     Yemen     YEM        0
3 Admin-0 country         3         2    Vietnam    VNM        0     2 Sovereign country   Vietnam     VNM        0
4 Admin-0 country         5         3  Venezuela    VEN        0     2 Sovereign country Venezuela     VEN        0
5 Admin-0 country         6         6    Vatican    VAT        0     2 Sovereign country   Vatican     VAT        0
    geounit gu_a3 su_dif   subunit su_a3 brk_diff      name name_long brk_a3  brk_name brk_group abbrev postal
0  Zimbabwe   ZWE      0  Zimbabwe   ZWE        0  Zimbabwe  Zimbabwe    ZWE  Zimbabwe      <NA>  Zimb.     ZW
1    Zambia   ZMB      0    Zambia   ZMB        0    Zambia    Zambia    ZMB    Zambia      <NA> Zambia     ZM
2     Yemen   YEM      0     Yemen   YEM        0     Yemen     Yemen    YEM     Yemen      <NA>   Yem.     YE
3   Vietnam   VNM      0   Vietnam   VNM        0   Vietnam   Vietnam    VNM   Vietnam      <NA>  Viet.     VN
4 Venezuela   VEN      0 Venezuela   VEN        0 Venezuela Venezuela    VEN Venezuela      <NA>   Ven.     VE
5   Vatican   VAT      0   Vatican   VAT        0   Vatican   Vatican    VAT   Vatican      <NA>   Vat.      V
                         formal_en                          formal_fr              name_ciawf note_adm0 note_brk
0             Republic of Zimbabwe                               <NA>                Zimbabwe      <NA>     <NA>
1               Republic of Zambia                               <NA>                  Zambia      <NA>     <NA>
2                Republic of Yemen                               <NA>                   Yemen      <NA>     <NA>
3    Socialist Republic of Vietnam                               <NA>                 Vietnam      <NA>     <NA>
4 Bolivarian Republic of Venezuela República Bolivariana de Venezuela               Venezuela      <NA>     <NA>
5        State of the Vatican City                               <NA> Holy See (Vatican City)      <NA>     <NA>
           name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est pop_rank gdp_md_est pop_year lastcensus
0           Zimbabwe     <NA>         1         5         3          9 13805084       14      28330     2017       2002
1             Zambia     <NA>         5         8         5         13 15972000       14      65170     2017       2010
2        Yemen, Rep.     <NA>         5         3         3         11 28036829       15      73450     2017       2004
3            Vietnam     <NA>         5         6         5          4 96160163       16     594900     2017       2009
4      Venezuela, RB     <NA>         1         3         1          4 31304016       15     468600     2017       2001
5 Vatican (Holy See) Holy See         1         3         4          2     1000        3          0     2015         NA
  gdp_year                    economy              income_grp wikipedia fips_10_ iso_a2 iso_a3 iso_a3_eh iso_n3 un_a3
0     2016    5. Emerging region: G20           5. Low income        NA       ZI     ZW    ZWE       ZWE    716   716
1     2016  7. Least developed region  4. Lower middle income        NA       ZA     ZM    ZMB       ZMB    894   894
2     2016  7. Least developed region  4. Lower middle income        NA       YM     YE    YEM       YEM    887   887
3     2016    5. Emerging region: G20  4. Lower middle income        NA       VM     VN    VNM       VNM    704   704
4     2016    5. Emerging region: G20  3. Upper middle income        NA       VE     VE    VEN       VEN    862   862
5        0 2. Developed region: nonG7 2. High income: nonOECD         0       VT     VA    VAT       VAT    336   336
  wb_a2 wb_a3   woe_id woe_id_eh                   woe_note adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb     continent
0    ZW   ZWE 23425004  23425004 Exact WOE match as country        ZWE        ZWE         NA         NA        Africa
1    ZM   ZMB 23425003  23425003 Exact WOE match as country        ZMB        ZMB         NA         NA        Africa
2    RY   YEM 23425002  23425002 Exact WOE match as country        YEM        YEM         NA         NA          Asia
3    VN   VNM 23424984  23424984 Exact WOE match as country        VNM        VNM         NA         NA          Asia
4    VE   VEN 23424982  23424982 Exact WOE match as country        VEN        VEN         NA         NA South America
5  <NA>  <NA> 23424986  23424986 Exact WOE match as country        VAT        VAT         NA         NA        Europe
  region_un          subregion                  region_wb name_len long_len abbrev_len tiny homepart min_zoom min_label
0    Africa     Eastern Africa         Sub-Saharan Africa        8        8          5   NA        1        0         3
1    Africa     Eastern Africa         Sub-Saharan Africa        6        6          6   NA        1        0         3
2      Asia       Western Asia Middle East & North Africa        5        5          4   NA        1        0         3
3      Asia South-Eastern Asia        East Asia & Pacific        7        7          5    2        1        0         2
4  Americas      South America  Latin America & Caribbean        9        9          4   NA        1        0         3
5    Europe    Southern Europe      Europe & Central Asia        7        7          4    4        1        0         5
  max_label      ne_id wikidataid name_ar name_bn      name_de      name_en             name_es   name_fr name_el
0       8.0 1159321441       Q954    <NA>    <NA>     Simbabwe     Zimbabwe            Zimbabue  Zimbabwe    <NA>
1       8.0 1159321439       Q953    <NA>    <NA>       Sambia       Zambia              Zambia    Zambie    <NA>
2       8.0 1159321425       Q805    <NA>    <NA>        Jemen        Yemen               Yemen     Yémen    <NA>
3       7.0 1159321417       Q881    <NA>    <NA>      Vietnam      Vietnam             Vietnam  Viêt Nam    <NA>
4       7.5 1159321411       Q717    <NA>    <NA>    Venezuela    Venezuela           Venezuela Venezuela    <NA>
5      10.0 1159321407       Q237    <NA>    <NA> Vatikanstadt Vatican City Ciudad del Vaticano   Vatican    <NA>
  name_hi   name_hu   name_id            name_it name_ja name_ko      name_nl   name_pl   name_pt name_ru       name_sv
0    <NA>  Zimbabwe  Zimbabwe           Zimbabwe    <NA>    <NA>     Zimbabwe  Zimbabwe  Zimbábue    <NA>      Zimbabwe
1    <NA>    Zambia    Zambia             Zambia    <NA>    <NA>       Zambia    Zambia    Zâmbia    <NA>        Zambia
2    <NA>     Jemen     Yaman              Yemen    <NA>    <NA>        Jemen     Jemen     Iémen    <NA>         Jemen
3    <NA>   Vietnám   Vietnam            Vietnam    <NA>    <NA>      Vietnam   Wietnam  Vietname    <NA>       Vietnam
4    <NA> Venezuela Venezuela          Venezuela    <NA>    <NA>    Venezuela Wenezuela Venezuela    <NA>     Venezuela
5    <NA>   Vatikán   Vatikan Città del Vaticano    <NA>    <NA> Vaticaanstad   Watykan  Vaticano    <NA> Vatikanstaten
    name_tr       name_vi name_zh                       geometry
0  Zimbabve      Zimbabwe    <NA> MULTIPOLYGON (((31.28789 -2...
1   Zambiya        Zambia    <NA> MULTIPOLYGON (((30.39609 -1...
2     Yemen         Yemen    <NA> MULTIPOLYGON (((53.08564 16...
3   Vietnam          <NA>    <NA> MULTIPOLYGON (((104.064 10....
4 Venezuela     Venezuela    <NA> MULTIPOLYGON (((-60.82119 9...
5   Vatikan Thành Vatican    <NA> MULTIPOLYGON (((12.43916 41...
> ggplot() +
+   geom_sf(data = world %>% filter(name_id %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70))
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70))
> centroids
# A tibble: 241 x 3
   iso_a2 Longitude Latitude
   <chr>      <dbl>    <dbl>
 1 AW        -70.0      12.5
 2 AF         66.0      33.8
 3 AO         17.5     -12.3
 4 AI        -63.1      18.2
 5 AL         20.0      41.1
 6 AX         20.0      60.2
 7 AD          1.56     42.5
 8 AE         54.3      23.9
 9 AR        -65.2     -35.4
10 AM         44.9      40.3
# … with 231 more rows
> jhu
# A tibble: 419 x 200
   date      World Afghanistan Africa Albania Algeria Andorra Angola Antigua.and.Barb… Argentina Armenia  Asia Australia
   <chr>     <dbl>       <dbl>  <dbl>   <dbl>   <dbl>   <dbl>  <dbl>             <dbl>     <dbl>   <dbl> <dbl>     <dbl>
 1 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 2 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 3 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 4 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 5 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 6 2020-01… NA              NA     NA      NA      NA      NA     NA                NA        NA      NA NA       NA    
 7 2020-01…  0.644          NA     NA      NA      NA      NA     NA                NA        NA      NA  1.08    NA    
 8 2020-01…  0.72           NA     NA      NA      NA      NA     NA                NA        NA      NA  1.20    NA    
 9 2020-01…  0.972          NA     NA      NA      NA      NA     NA                NA        NA      NA  1.63    NA    
10 2020-01…  1.15           NA     NA      NA      NA      NA     NA                NA        NA      NA  1.93     0.353
# … with 409 more rows, and 187 more variables: Austria <dbl>, Azerbaijan <dbl>, Bahamas <dbl>, Bahrain <dbl>,
#   Bangladesh <dbl>, Barbados <dbl>, Belarus <dbl>, Belgium <dbl>, Belize <dbl>, Benin <dbl>, Bhutan <dbl>,
#   Bolivia <dbl>, Bosnia.and.Herzegovina <dbl>, Botswana <dbl>, Brazil <dbl>, Brunei <dbl>, Bulgaria <dbl>,
#   Burkina.Faso <dbl>, Burundi <dbl>, Cambodia <dbl>, Cameroon <dbl>, Canada <dbl>, Cape.Verde <dbl>,
#   Central.African.Republic <dbl>, Chad <dbl>, Chile <dbl>, China <dbl>, Colombia <dbl>, Comoros <dbl>, Congo <dbl>,
#   Costa.Rica <dbl>, Cote.d.Ivoire <dbl>, Croatia <dbl>, Cuba <dbl>, Cyprus <dbl>, Czechia <dbl>,
#   Democratic.Republic.of.Congo <dbl>, Denmark <dbl>, Djibouti <dbl>, Dominica <dbl>, Dominican.Republic <dbl>,
#   Ecuador <dbl>, Egypt <dbl>, El.Salvador <dbl>, Equatorial.Guinea <dbl>, Eritrea <dbl>, Estonia <dbl>,
#   Eswatini <dbl>, Ethiopia <dbl>, Europe <dbl>, European.Union <dbl>, Fiji <dbl>, Finland <dbl>, France <dbl>,
#   Gabon <dbl>, Gambia <dbl>, Georgia <dbl>, Germany <dbl>, Ghana <dbl>, Greece <dbl>, Grenada <dbl>, Guatemala <dbl>,
#   Guinea <dbl>, Guinea.Bissau <dbl>, Guyana <dbl>, Haiti <dbl>, Honduras <dbl>, Hungary <dbl>, Iceland <dbl>,
#   India <dbl>, Indonesia <dbl>, International <lgl>, Iran <dbl>, Iraq <dbl>, Ireland <dbl>, Israel <dbl>,
#   Italy <dbl>, Jamaica <dbl>, Japan <dbl>, Jordan <dbl>, Kazakhstan <dbl>, Kenya <dbl>, Kosovo <dbl>, Kuwait <dbl>,
#   Kyrgyzstan <dbl>, Laos <dbl>, Latvia <dbl>, Lebanon <dbl>, Lesotho <dbl>, Liberia <dbl>, Libya <dbl>,
#   Liechtenstein <dbl>, Lithuania <dbl>, Luxembourg <dbl>, Madagascar <dbl>, Malawi <dbl>, Malaysia <dbl>,
#   Maldives <dbl>, Mali <dbl>, Malta <dbl>, …
> cntrs
# A tibble: 10 x 3
   date       country   case
   <chr>      <chr>    <dbl>
 1 2021-03-14 Serbia   4532.
 2 2021-03-14 Croatia  1104.
 3 2021-03-14 Slovenia 2360.
 4 2021-03-14 Austria  2054.
 5 2021-03-14 Slovakia 2585.
 6 2021-03-14 Czechia  7260.
 7 2021-03-14 Poland   2952.
 8 2021-03-14 Ukraine  1377.
 9 2021-03-14 Romania  1634.
10 2021-03-14 Hungary  5225.
> centroids
# A tibble: 241 x 3
   iso_a2 Longitude Latitude
   <chr>      <dbl>    <dbl>
 1 AW        -70.0      12.5
 2 AF         66.0      33.8
 3 AO         17.5     -12.3
 4 AI        -63.1      18.2
 5 AL         20.0      41.1
 6 AX         20.0      60.2
 7 AD          1.56     42.5
 8 AE         54.3      23.9
 9 AR        -65.2     -35.4
10 AM         44.9      40.3
# … with 231 more rows
> library(countrycode)
> ?codelist
codelist              package:countrycode              R Documentation

Country Code Translation Data Frame (Cross-Sectional)

Description:

     A data frame used internally by the ‘countrycode()’ function.
     `countrycode` can use any valid code as destination, but only some
     codes can be used as origin.

Format:

     data frame with codes as columns

Details:

     Origin and Destination:

        • ccTLD: IANA country code top-level domain

        • country.name: country name (English)

        • country.name.de: country name (German)

        • cowc: Correlates of War character

        • cown: Correlates of War numeric

        • dhs: Demographic and Health Surveys Program

        • ecb: European Central Bank

        • eurostat: Eurostat

        • fao: Food and Agriculture Organization of the United Nations
          numerical code

        • fips: FIPS 10-4 (Federal Information Processing Standard)

        • gaul: Global Administrative Unit Layers

        • genc2c: GENC 2-letter code

        • genc3c: GENC 3-letter code

        • genc3n: GENC numeric code

        • gwc: Gleditsch & Ward character

        • gwn: Gleditsch & Ward numeric

        • imf: International Monetary Fund

        • ioc: International Olympic Committee

        • iso2c: ISO-2 character

        • iso3c: ISO-3 character

        • iso3n: ISO-3 numeric

        • p4n: Polity IV numeric country code

        • p4c: Polity IV character country code

        • un: United Nations M49 numeric codes

        • unicode.symbol: Region subtag (often displayed as emoji flag)

        • unpd: United Nations Procurement Division

        • vdem: Varieties of Democracy (V-Dem version 8, April 2018)

        • wb: World Bank (very similar but not identical to iso3c)

        • wvs: World Values Survey numeric code

     Destination only:

        • ar5: IPCC's regional mapping used both in the Fifth
          Assessment Report (AR5) and for the Reference Concentration
          Pathways (RCP)

        • continent: Continent as defined in the World Bank Development
          Indicators

        • cow.name: Correlates of War country name

        • currency: ISO 4217 currency name

        • eurocontrol_pru: European Organisation for the Safety of Air
          Navigation

        • eurocontrol_statfor: European Organisation for the Safety of
          Air Navigation

        • eu28: Member states of the European Union (as of December
          2015), without special territories

        • icao.region: International Civil Aviation Organization region

        • iso.name.en: ISO English short name

        • iso.name.fr: ISO French short name

        • iso4217c: ISO 4217 currency alphabetic code

        • iso4217n: ISO 4217 currency numeric code

        • p4.name: Polity IV country name

        • region: 7 Regions as defined in the World Bank Development
          Indicators

        • region23: 23 Regions as used to be in the World Bank
          Development Indicators (legacy)

        • un.name.ar: United Nations Arabic country name

        • un.name.en: United Nations English country name

        • un.name.es: United Nations Spanish country name

        • un.name.fr: United Nations French country name

        • un.name.ru: United Nations Russian country name

        • un.name.zh: United Nations Chinese country name

        • un.region.name: United Nations region name

        • un.region.code: United Nations region code

        • un.regionintermediate.name: United Nations intermediate
          region name

        • un.regionintermediate.code: United Nations intermediate
          region code

        • un.regionsub.name: United Nations sub-region name

        • un.regionsub.code: United Nations sub-region code

        • wvs.name: World Values Survey numeric code country name

        • cldr.*: 600+ country name variants from the UNICODE CLDR
          project.  Inspect the `countrycode::cldr_examples` data.frame
          for a full list of available country names and examples.

Note:

     The Correlates of War (cow) and Polity 4 (p4) project produce
     codes in country year format. Some countries go through political
     transitions that justify changing codes over time. When building a
     purely cross-sectional conversion dictionary, this forces us to
     make arbitrary choices with respect to some entities (e.g.,
     Western Germany, Vietnam, Serbia). `countrycode` includes a
     reconciled dataset in panel format:
     `countrycode::countrycode_panel`. Instead of converting code, we
     recommend that users dealing with panel data "left-merge" their
     data into this panel dictionary.


> centroids
# A tibble: 241 x 3
   iso_a2 Longitude Latitude
   <chr>      <dbl>    <dbl>
 1 AW        -70.0      12.5
 2 AF         66.0      33.8
 3 AO         17.5     -12.3
 4 AI        -63.1      18.2
 5 AL         20.0      41.1
 6 AX         20.0      60.2
 7 AD          1.56     42.5
 8 AE         54.3      23.9
 9 AR        -65.2     -35.4
10 AM         44.9      40.3
# … with 231 more rows
> countrycode(centroids$iso_a2, origin = "iso2c", destination = "iso.name.en")
  [1] "Aruba"                                        "Afghanistan"                                 
  [3] "Angola"                                       "Anguilla"                                    
  [5] "Albania"                                      "Åland Islands"                               
  [7] "Andorra"                                      "United Arab Emirates (the)"                  
  [9] "Argentina"                                    "Armenia"                                     
 [11] "American Samoa"                               "Antarctica"                                  
 [13] NA                                             "French Southern Territories (the)"           
 [15] "Antigua and Barbuda"                          "Australia"                                   
 [17] "Austria"                                      "Azerbaijan"                                  
 [19] "Burundi"                                      "Belgium"                                     
 [21] "Benin"                                        "Burkina Faso"                                
 [23] "Bangladesh"                                   "Bulgaria"                                    
 [25] "Bahrain"                                      "Canada"                                      
 [27] "Bahamas (the)"                                "Bosnia and Herzegovina"                      
 [29] "Saint Barthélemy"                             "Belarus"                                     
 [31] "Belize"                                       "Bermuda"                                     
 [33] "Bolivia (Plurinational State of)"             "Brazil"                                      
 [35] "Barbados"                                     "Brunei Darussalam"                           
 [37] "Bhutan"                                       "Botswana"                                    
 [39] "Central African Republic (the)"               "Switzerland"                                 
 [41] "Chile"                                        "China"                                       
 [43] "Côte d'Ivoire"                                "Cameroon"                                    
 [45] "Congo (the Democratic Republic of the)"       "Congo (the)"                                 
 [47] "Cook Islands (the)"                           "Colombia"                                    
 [49] "Comoros (the)"                                "Cabo Verde"                                  
 [51] "Costa Rica"                                   "Cuba"                                        
 [53] "Curaçao"                                      "Cayman Islands (the)"                        
 [55] NA                                             "Cyprus"                                      
 [57] "Czechia"                                      "Germany"                                     
 [59] "Djibouti"                                     "Dominica"                                    
 [61] "Denmark"                                      "Dominican Republic (the)"                    
 [63] "Algeria"                                      "Ecuador"                                     
 [65] "Egypt"                                        "Eritrea"                                     
 [67] "Spain"                                        "Estonia"                                     
 [69] "Ethiopia"                                     "Finland"                                     
 [71] "Fiji"                                         "Falkland Islands (the) [Malvinas]"           
 [73] "France"                                       "Faroe Islands (the)"                         
 [75] "Micronesia (Federated States of)"             "Gabon"                                       
 [77] "United Kingdom"                               "Georgia"                                     
 [79] "Guernsey"                                     "Ghana"                                       
 [81] "Guinea"                                       "Gambia (the)"                                
 [83] "Guinea-Bissau"                                "Equatorial Guinea"                           
 [85] "Greece"                                       "Grenada"                                     
 [87] "Greenland"                                    "Guatemala"                                   
 [89] "Guam"                                         "Guyana"                                      
 [91] "Hong Kong"                                    "Heard Island and McDonald Islands"           
 [93] "Honduras"                                     "Croatia"                                     
 [95] "Haiti"                                        "Hungary"                                     
 [97] "Indonesia"                                    "Isle of Man"                                 
 [99] "India"                                        NA                                            
[101] "British Indian Ocean Territory (the)"         "Ireland"                                     
[103] "Iran (Islamic Republic of)"                   "Iraq"                                        
[105] "Iceland"                                      "Israel"                                      
[107] "Italy"                                        "Jamaica"                                     
[109] "Jersey"                                       "Jordan"                                      
[111] "Japan"                                        NA                                            
[113] "Kazakhstan"                                   "Kenya"                                       
[115] "Kyrgyzstan"                                   "Cambodia"                                    
[117] "Kiribati"                                     "Saint Kitts and Nevis"                       
[119] "Korea (the Republic of)"                      NA                                            
[121] "Kuwait"                                       "Lao People's Democratic Republic (the)"      
[123] "Lebanon"                                      "Liberia"                                     
[125] "Libya"                                        "Saint Lucia"                                 
[127] "Liechtenstein"                                "Sri Lanka"                                   
[129] "Lesotho"                                      "Lithuania"                                   
[131] "Luxembourg"                                   "Latvia"                                      
[133] "Macao"                                        "Saint Martin (French part)"                  
[135] "Morocco"                                      "Monaco"                                      
[137] "Moldova (the Republic of)"                    "Madagascar"                                  
[139] "Maldives"                                     "Mexico"                                      
[141] "Marshall Islands (the)"                       "North Macedonia"                             
[143] "Mali"                                         "Malta"                                       
[145] "Myanmar"                                      "Montenegro"                                  
[147] "Mongolia"                                     "Northern Mariana Islands (the)"              
[149] "Mozambique"                                   "Mauritania"                                  
[151] "Montserrat"                                   "Mauritius"                                   
[153] "Malawi"                                       "Malaysia"                                    
[155] NA                                             "New Caledonia"                               
[157] "Niger (the)"                                  "Norfolk Island"                              
[159] "Nigeria"                                      "Nicaragua"                                   
[161] "Niue"                                         "Netherlands (the)"                           
[163] "Norway"                                       "Nepal"                                       
[165] "Nauru"                                        "New Zealand"                                 
[167] "Oman"                                         "Pakistan"                                    
[169] "Panama"                                       "Pitcairn"                                    
[171] "Peru"                                         "Philippines (the)"                           
[173] "Palau"                                        "Papua New Guinea"                            
[175] "Poland"                                       "Puerto Rico"                                 
[177] "Korea (the Democratic People's Republic of)"  "Portugal"                                    
[179] "Paraguay"                                     "Palestine, State of"                         
[181] "French Polynesia"                             "Qatar"                                       
[183] "Romania"                                      "Russian Federation (the)"                    
[185] "Rwanda"                                       "Western Sahara"                              
[187] "Saudi Arabia"                                 "Sudan (the)"                                 
[189] "South Sudan"                                  "Senegal"                                     
[191] "Singapore"                                    "South Georgia and the South Sandwich Islands"
[193] "Saint Helena, Ascension and Tristan da Cunha" "Solomon Islands"                             
[195] "Sierra Leone"                                 "El Salvador"                                 
[197] "San Marino"                                   NA                                            
[199] "Somalia"                                      "Saint Pierre and Miquelon"                   
[201] "Serbia"                                       "Sao Tome and Principe"                       
[203] "Suriname"                                     "Slovakia"                                    
[205] "Slovenia"                                     "Sweden"                                      
[207] "Eswatini"                                     "Sint Maarten (Dutch part)"                   
[209] "Seychelles"                                   "Syrian Arab Republic (the)"                  
[211] "Turks and Caicos Islands (the)"               "Chad"                                        
[213] "Togo"                                         "Thailand"                                    
[215] "Tajikistan"                                   "Turkmenistan"                                
[217] "Timor-Leste"                                  "Tonga"                                       
[219] "Trinidad and Tobago"                          "Tunisia"                                     
[221] "Turkey"                                       "Taiwan (Province of China)"                  
[223] "Tanzania, the United Republic of"             "Uganda"                                      
[225] "Ukraine"                                      "Uruguay"                                     
[227] "United States of America (the)"               "Uzbekistan"                                  
[229] "Holy See (the)"                               "Saint Vincent and the Grenadines"            
[231] "Venezuela (Bolivarian Republic of)"           "Virgin Islands (British)"                    
[233] "Virgin Islands (U.S.)"                        "Viet Nam"                                    
[235] "Vanuatu"                                      "Wallis and Futuna"                           
[237] "Samoa"                                        "Yemen"                                       
[239] "South Africa"                                 "Zambia"                                      
[241] "Zimbabwe"                                    
Warning message:
In countrycode(centroids$iso_a2, origin = "iso2c", destination = "iso.name.en") :
  Some values were not matched unambiguously: -99

> centroids$country <- countrycode(centroids$iso_a2,
+             origin = "iso2c",
+             destination = "iso.name.en")
Warning message:
In countrycode(centroids$iso_a2, origin = "iso2c", destination = "iso.name.en") :
  Some values were not matched unambiguously: -99

> cntrs %>%
+   left_join(centroids, by = "country")
# A tibble: 10 x 6
   date       country   case iso_a2 Longitude Latitude
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl>
 1 2021-03-14 Serbia   4532. RS          20.8     44.2
 2 2021-03-14 Croatia  1104. HR          16.4     45.1
 3 2021-03-14 Slovenia 2360. SI          14.8     46.1
 4 2021-03-14 Austria  2054. AT          14.1     47.6
 5 2021-03-14 Slovakia 2585. SK          19.5     48.7
 6 2021-03-14 Czechia  7260. CZ          15.3     49.7
 7 2021-03-14 Poland   2952. PL          19.4     52.1
 8 2021-03-14 Ukraine  1377. UA          31.4     49.0
 9 2021-03-14 Romania  1634. RO          25.0     45.9
10 2021-03-14 Hungary  5225. HU          19.4     47.2
> cntrs <- jhu %>%
+   filter(date == "2021-03-15") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> 
> centroids$country <- countrycode(centroids$iso_a2,
+             origin = "iso2c",
+             destination = "iso.name.en")
Warning message:
In countrycode(centroids$iso_a2, origin = "iso2c", destination = "iso.name.en") :
  Some values were not matched unambiguously: -99

> # ?codelist
> 
> cntrs %>%
+   left_join(centroids, by = "country")
# A tibble: 10 x 6
   date       country   case iso_a2 Longitude Latitude
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2
 2 2021-03-15 Croatia  1112. HR          16.4     45.1
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1
 4 2021-03-15 Austria  2052. AT          14.1     47.6
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7
 7 2021-03-15 Poland   3077. PL          19.4     52.1
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0
 9 2021-03-15 Romania  1670. RO          25.0     45.9
10 2021-03-15 Hungary  5743. HU          19.4     47.2
> df <- cntrs %>%
+   left_join(centroids, by = "country")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude, y = Latitude,color = as.factor(case)))
> head(world)
Simple feature collection with 6 features and 94 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -73.36621 ymin: -22.40205 xmax: 109.4449 ymax: 41.9062
CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
       featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level              type     admin adm0_a3 geou_dif
0 Admin-0 country         1         3   Zimbabwe    ZWE        0     2 Sovereign country  Zimbabwe     ZWE        0
1 Admin-0 country         1         3     Zambia    ZMB        0     2 Sovereign country    Zambia     ZMB        0
2 Admin-0 country         1         3      Yemen    YEM        0     2 Sovereign country     Yemen     YEM        0
3 Admin-0 country         3         2    Vietnam    VNM        0     2 Sovereign country   Vietnam     VNM        0
4 Admin-0 country         5         3  Venezuela    VEN        0     2 Sovereign country Venezuela     VEN        0
5 Admin-0 country         6         6    Vatican    VAT        0     2 Sovereign country   Vatican     VAT        0
    geounit gu_a3 su_dif   subunit su_a3 brk_diff      name name_long brk_a3  brk_name brk_group abbrev postal
0  Zimbabwe   ZWE      0  Zimbabwe   ZWE        0  Zimbabwe  Zimbabwe    ZWE  Zimbabwe      <NA>  Zimb.     ZW
1    Zambia   ZMB      0    Zambia   ZMB        0    Zambia    Zambia    ZMB    Zambia      <NA> Zambia     ZM
2     Yemen   YEM      0     Yemen   YEM        0     Yemen     Yemen    YEM     Yemen      <NA>   Yem.     YE
3   Vietnam   VNM      0   Vietnam   VNM        0   Vietnam   Vietnam    VNM   Vietnam      <NA>  Viet.     VN
4 Venezuela   VEN      0 Venezuela   VEN        0 Venezuela Venezuela    VEN Venezuela      <NA>   Ven.     VE
5   Vatican   VAT      0   Vatican   VAT        0   Vatican   Vatican    VAT   Vatican      <NA>   Vat.      V
                         formal_en                          formal_fr              name_ciawf note_adm0 note_brk
0             Republic of Zimbabwe                               <NA>                Zimbabwe      <NA>     <NA>
1               Republic of Zambia                               <NA>                  Zambia      <NA>     <NA>
2                Republic of Yemen                               <NA>                   Yemen      <NA>     <NA>
3    Socialist Republic of Vietnam                               <NA>                 Vietnam      <NA>     <NA>
4 Bolivarian Republic of Venezuela República Bolivariana de Venezuela               Venezuela      <NA>     <NA>
5        State of the Vatican City                               <NA> Holy See (Vatican City)      <NA>     <NA>
           name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est pop_rank gdp_md_est pop_year lastcensus
0           Zimbabwe     <NA>         1         5         3          9 13805084       14      28330     2017       2002
1             Zambia     <NA>         5         8         5         13 15972000       14      65170     2017       2010
2        Yemen, Rep.     <NA>         5         3         3         11 28036829       15      73450     2017       2004
3            Vietnam     <NA>         5         6         5          4 96160163       16     594900     2017       2009
4      Venezuela, RB     <NA>         1         3         1          4 31304016       15     468600     2017       2001
5 Vatican (Holy See) Holy See         1         3         4          2     1000        3          0     2015         NA
  gdp_year                    economy              income_grp wikipedia fips_10_ iso_a2 iso_a3 iso_a3_eh iso_n3 un_a3
0     2016    5. Emerging region: G20           5. Low income        NA       ZI     ZW    ZWE       ZWE    716   716
1     2016  7. Least developed region  4. Lower middle income        NA       ZA     ZM    ZMB       ZMB    894   894
2     2016  7. Least developed region  4. Lower middle income        NA       YM     YE    YEM       YEM    887   887
3     2016    5. Emerging region: G20  4. Lower middle income        NA       VM     VN    VNM       VNM    704   704
4     2016    5. Emerging region: G20  3. Upper middle income        NA       VE     VE    VEN       VEN    862   862
5        0 2. Developed region: nonG7 2. High income: nonOECD         0       VT     VA    VAT       VAT    336   336
  wb_a2 wb_a3   woe_id woe_id_eh                   woe_note adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb     continent
0    ZW   ZWE 23425004  23425004 Exact WOE match as country        ZWE        ZWE         NA         NA        Africa
1    ZM   ZMB 23425003  23425003 Exact WOE match as country        ZMB        ZMB         NA         NA        Africa
2    RY   YEM 23425002  23425002 Exact WOE match as country        YEM        YEM         NA         NA          Asia
3    VN   VNM 23424984  23424984 Exact WOE match as country        VNM        VNM         NA         NA          Asia
4    VE   VEN 23424982  23424982 Exact WOE match as country        VEN        VEN         NA         NA South America
5  <NA>  <NA> 23424986  23424986 Exact WOE match as country        VAT        VAT         NA         NA        Europe
  region_un          subregion                  region_wb name_len long_len abbrev_len tiny homepart min_zoom min_label
0    Africa     Eastern Africa         Sub-Saharan Africa        8        8          5   NA        1        0         3
1    Africa     Eastern Africa         Sub-Saharan Africa        6        6          6   NA        1        0         3
2      Asia       Western Asia Middle East & North Africa        5        5          4   NA        1        0         3
3      Asia South-Eastern Asia        East Asia & Pacific        7        7          5    2        1        0         2
4  Americas      South America  Latin America & Caribbean        9        9          4   NA        1        0         3
5    Europe    Southern Europe      Europe & Central Asia        7        7          4    4        1        0         5
  max_label      ne_id wikidataid name_ar name_bn      name_de      name_en             name_es   name_fr name_el
0       8.0 1159321441       Q954    <NA>    <NA>     Simbabwe     Zimbabwe            Zimbabue  Zimbabwe    <NA>
1       8.0 1159321439       Q953    <NA>    <NA>       Sambia       Zambia              Zambia    Zambie    <NA>
2       8.0 1159321425       Q805    <NA>    <NA>        Jemen        Yemen               Yemen     Yémen    <NA>
3       7.0 1159321417       Q881    <NA>    <NA>      Vietnam      Vietnam             Vietnam  Viêt Nam    <NA>
4       7.5 1159321411       Q717    <NA>    <NA>    Venezuela    Venezuela           Venezuela Venezuela    <NA>
5      10.0 1159321407       Q237    <NA>    <NA> Vatikanstadt Vatican City Ciudad del Vaticano   Vatican    <NA>
  name_hi   name_hu   name_id            name_it name_ja name_ko      name_nl   name_pl   name_pt name_ru       name_sv
0    <NA>  Zimbabwe  Zimbabwe           Zimbabwe    <NA>    <NA>     Zimbabwe  Zimbabwe  Zimbábue    <NA>      Zimbabwe
1    <NA>    Zambia    Zambia             Zambia    <NA>    <NA>       Zambia    Zambia    Zâmbia    <NA>        Zambia
2    <NA>     Jemen     Yaman              Yemen    <NA>    <NA>        Jemen     Jemen     Iémen    <NA>         Jemen
3    <NA>   Vietnám   Vietnam            Vietnam    <NA>    <NA>      Vietnam   Wietnam  Vietname    <NA>       Vietnam
4    <NA> Venezuela Venezuela          Venezuela    <NA>    <NA>    Venezuela Wenezuela Venezuela    <NA>     Venezuela
5    <NA>   Vatikán   Vatikan Città del Vaticano    <NA>    <NA> Vaticaanstad   Watykan  Vaticano    <NA> Vatikanstaten
    name_tr       name_vi name_zh                       geometry
0  Zimbabve      Zimbabwe    <NA> MULTIPOLYGON (((31.28789 -2...
1   Zambiya        Zambia    <NA> MULTIPOLYGON (((30.39609 -1...
2     Yemen         Yemen    <NA> MULTIPOLYGON (((53.08564 16...
3   Vietnam          <NA>    <NA> MULTIPOLYGON (((104.064 10....
4 Venezuela     Venezuela    <NA> MULTIPOLYGON (((-60.82119 9...
5   Vatikan Thành Vatican    <NA> MULTIPOLYGON (((12.43916 41...
> world$name_en
  [1] "Zimbabwe"                                     "Zambia"                                      
  [3] "Yemen"                                        "Vietnam"                                     
  [5] "Venezuela"                                    "Vatican City"                                
  [7] "Vanuatu"                                      "Uzbekistan"                                  
  [9] "Uruguay"                                      "Federated States of Micronesia"              
 [11] "Marshall Islands"                             "Northern Mariana Islands"                    
 [13] "United States Virgin Islands"                 "Guam"                                        
 [15] "American Samoa"                               "Puerto Rico"                                 
 [17] "United States of America"                     "South Georgia and the South Sandwich Islands"
 [19] "British Indian Ocean Territory"               "Saint Helena"                                
 [21] "Pitcairn Islands"                             "Anguilla"                                    
 [23] "Falkland Islands"                             "Cayman Islands"                              
 [25] "Bermuda"                                      "British Virgin Islands"                      
 [27] "Turks and Caicos Islands"                     "Montserrat"                                  
 [29] "Jersey"                                       "Guernsey"                                    
 [31] "Isle of Man"                                  "United Kingdom"                              
 [33] "United Arab Emirates"                         "Ukraine"                                     
 [35] "Uganda"                                       "Turkmenistan"                                
 [37] "Turkey"                                       "Tunisia"                                     
 [39] "Trinidad and Tobago"                          "Tonga"                                       
 [41] "Togo"                                         "East Timor"                                  
 [43] "Thailand"                                     "Tanzania"                                    
 [45] "Tajikistan"                                   "Taiwan"                                      
 [47] "Syria"                                        "Switzerland"                                 
 [49] "Sweden"                                       "eSwatini"                                    
 [51] "Suriname"                                     "South Sudan"                                 
 [53] "Sudan"                                        "Sri Lanka"                                   
 [55] "Spain"                                        "South Korea"                                 
 [57] "South Africa"                                 "Somalia"                                     
 [59] "Somaliland"                                   "Solomon Islands"                             
 [61] "Slovakia"                                     "Slovenia"                                    
 [63] "Singapore"                                    "Sierra Leone"                                
 [65] "Seychelles"                                   "Serbia"                                      
 [67] "Senegal"                                      "Saudi Arabia"                                
 [69] "São Tomé and Príncipe"                        "San Marino"                                  
 [71] "Samoa"                                        "Saint Vincent and the Grenadines"            
 [73] "Saint Lucia"                                  "Saint Kitts and Nevis"                       
 [75] "Rwanda"                                       "Russia"                                      
 [77] "Romania"                                      "Qatar"                                       
 [79] "Portugal"                                     "Poland"                                      
 [81] "Philippines"                                  "Peru"                                        
 [83] "Paraguay"                                     "Papua New Guinea"                            
 [85] "Panama"                                       "Palau"                                       
 [87] "Pakistan"                                     "Oman"                                        
 [89] "Norway"                                       "North Korea"                                 
 [91] "Nigeria"                                      "Niger"                                       
 [93] "Nicaragua"                                    "New Zealand"                                 
 [95] "Niue"                                         "Cook Islands"                                
 [97] "Netherlands"                                  "Aruba"                                       
 [99] "Curaçao"                                      "Nepal"                                       
[101] "Nauru"                                        "Namibia"                                     
[103] "Mozambique"                                   "Morocco"                                     
[105] "Western Sahara"                               "Montenegro"                                  
[107] "Mongolia"                                     "Moldova"                                     
[109] "Monaco"                                       "Mexico"                                      
[111] "Mauritius"                                    "Mauritania"                                  
[113] "Malta"                                        "Mali"                                        
[115] "Maldives"                                     "Malaysia"                                    
[117] "Malawi"                                       "Madagascar"                                  
[119] "Republic of Macedonia"                        "Luxembourg"                                  
[121] "Lithuania"                                    "Liechtenstein"                               
[123] "Libya"                                        "Liberia"                                     
[125] "Lesotho"                                      "Lebanon"                                     
[127] "Latvia"                                       "Laos"                                        
[129] "Kyrgyzstan"                                   "Kuwait"                                      
[131] "Kosovo"                                       "Kiribati"                                    
[133] "Kenya"                                        "Kazakhstan"                                  
[135] "Jordan"                                       "Japan"                                       
[137] "Jamaica"                                      "Italy"                                       
[139] "Israel"                                       "Palestine"                                   
[141] "Ireland"                                      "Iraq"                                        
[143] "Iran"                                         "Indonesia"                                   
[145] "India"                                        "Iceland"                                     
[147] "Hungary"                                      "Honduras"                                    
[149] "Haiti"                                        "Guyana"                                      
[151] "Guinea-Bissau"                                "Guinea"                                      
[153] "Guatemala"                                    "Grenada"                                     
[155] "Greece"                                       "Ghana"                                       
[157] "Germany"                                      "Georgia"                                     
[159] "The Gambia"                                   "Gabon"                                       
[161] "France"                                       "Saint Pierre and Miquelon"                   
[163] "Wallis and Futuna"                            "Saint Martin"                                
[165] "Saint-Barthélemy"                             "French Polynesia"                            
[167] "New Caledonia"                                "French Southern and Antarctic Lands"         
[169] "Åland Islands"                                "Finland"                                     
[171] "Fiji"                                         "Ethiopia"                                    
[173] "Estonia"                                      "Eritrea"                                     
[175] "Equatorial Guinea"                            "El Salvador"                                 
[177] "Egypt"                                        "Ecuador"                                     
[179] "Dominican Republic"                           "Dominica"                                    
[181] "Djibouti"                                     "Greenland"                                   
[183] "Faroe Islands"                                "Denmark"                                     
[185] "Czech Republic"                               "Turkish Republic of Northern Cyprus"         
[187] "Cyprus"                                       "Cuba"                                        
[189] "Croatia"                                      "Ivory Coast"                                 
[191] "Costa Rica"                                   "Democratic Republic of the Congo"            
[193] "Republic of the Congo"                        "Comoros"                                     
[195] "Colombia"                                     "People's Republic of China"                  
[197] "Macau"                                        "Hong Kong"                                   
[199] "Chile"                                        "Chad"                                        
[201] "Central African Republic"                     "Cape Verde"                                  
[203] "Canada"                                       "Cameroon"                                    
[205] "Cambodia"                                     "Myanmar"                                     
[207] "Burundi"                                      "Burkina Faso"                                
[209] "Bulgaria"                                     "Brunei"                                      
[211] "Brazil"                                       "Botswana"                                    
[213] "Bosnia and Herzegovina"                       "Bolivia"                                     
[215] "Bhutan"                                       "Benin"                                       
[217] "Belize"                                       "Belgium"                                     
[219] "Belarus"                                      "Barbados"                                    
[221] "Bangladesh"                                   "Bahrain"                                     
[223] "The Bahamas"                                  "Azerbaijan"                                  
[225] "Austria"                                      "Australia"                                   
[227] "Australian Indian Ocean Territories"          "Heard Island and McDonald Islands"           
[229] "Norfolk Island"                               "Ashmore and Cartier Islands"                 
[231] "Armenia"                                      "Argentina"                                   
[233] "Antigua and Barbuda"                          "Angola"                                      
[235] "Andorra"                                      "Algeria"                                     
[237] "Albania"                                      "Afghanistan"                                 
[239] "Siachen Glacier"                              "Antarctica"                                  
[241] "Sint Maarten"                                
> world$name_en["Czech Republic"]
[1] NA
> world$name_en[world$name_en == "Czech Republic"]
[1] "Czech Republic"
> world$name_en[world$name_en == "Czech Republic"] <- "Czechia"
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude, y = Latitude,color = as.factor(case)))
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude, y = Latitude,color = case))
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.2, linetype = "dashed",
+                color = "#606060")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.2, linetype = "dashed",
+                color = "black")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.7, linetype = "dashed",
+                color = "black")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(-10, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.7, linetype = "dashed",
+                color = "black")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.7, linetype = "dashed",
+                color = "black")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(30,70)) +
+   geom_point(data = df,
+              aes(x = Longitude,
+                  y = Latitude, color = case)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df, aes(x = 50,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + case),
+                color = "#222222")
> df <- cntrs %>%
+   left_join(centroids, by = "country")
> df
# A tibble: 10 x 6
   date       country   case iso_a2 Longitude Latitude
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2
 2 2021-03-15 Croatia  1112. HR          16.4     45.1
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1
 4 2021-03-15 Austria  2052. AT          14.1     47.6
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7
 7 2021-03-15 Poland   3077. PL          19.4     52.1
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0
 9 2021-03-15 Romania  1670. RO          25.0     45.9
10 2021-03-15 Hungary  5743. HU          19.4     47.2
> df %>%
+   mutate(.data, czpct = case/7202*100)
Error: Problem with `mutate()` input `..1`.
✖ Input `..1` must be a vector, not a `rlang_data_pronoun` object.
ℹ Input `..1` is `.data`.
Run `rlang::last_error()` to see where the error occurred.
> df %>%
+   mutate(.data, czpct = (case/7202)*100)
Error: Problem with `mutate()` input `..1`.
✖ Input `..1` must be a vector, not a `rlang_data_pronoun` object.
ℹ Input `..1` is `.data`.
Run `rlang::last_error()` to see where the error occurred.
> df %>%
+   mutate(czpct = (case/7202)*100)
# A tibble: 10 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2  64.0
 2 2021-03-15 Croatia  1112. HR          16.4     45.1  15.4
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1  32.7
 4 2021-03-15 Austria  2052. AT          14.1     47.6  28.5
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7  36.0
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7 100. 
 7 2021-03-15 Poland   3077. PL          19.4     52.1  42.7
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0  19.5
 9 2021-03-15 Romania  1670. RO          25.0     45.9  23.2
10 2021-03-15 Hungary  5743. HU          19.4     47.2  79.7
> df %>%
+   mutate(czpct = case/7202*100)
# A tibble: 10 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2  64.0
 2 2021-03-15 Croatia  1112. HR          16.4     45.1  15.4
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1  32.7
 4 2021-03-15 Austria  2052. AT          14.1     47.6  28.5
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7  36.0
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7 100. 
 7 2021-03-15 Poland   3077. PL          19.4     52.1  42.7
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0  19.5
 9 2021-03-15 Romania  1670. RO          25.0     45.9  23.2
10 2021-03-15 Hungary  5743. HU          19.4     47.2  79.7
> df %>%
+   mutate(czpct = round(case/7202*100), 0)
# A tibble: 10 x 8
   date       country   case iso_a2 Longitude Latitude czpct   `0`
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2    64     0
 2 2021-03-15 Croatia  1112. HR          16.4     45.1    15     0
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1    33     0
 4 2021-03-15 Austria  2052. AT          14.1     47.6    28     0
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7    36     0
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7   100     0
 7 2021-03-15 Poland   3077. PL          19.4     52.1    43     0
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0    20     0
 9 2021-03-15 Romania  1670. RO          25.0     45.9    23     0
10 2021-03-15 Hungary  5743. HU          19.4     47.2    80     0
> df %>%
+   mutate(czpct = round((case/7202*100), 0))
# A tibble: 10 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2    64
 2 2021-03-15 Croatia  1112. HR          16.4     45.1    15
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1    33
 4 2021-03-15 Austria  2052. AT          14.1     47.6    28
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7    36
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7   100
 7 2021-03-15 Poland   3077. PL          19.4     52.1    43
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0    20
 9 2021-03-15 Romania  1670. RO          25.0     45.9    23
10 2021-03-15 Hungary  5743. HU          19.4     47.2    80
> df2 <- df %>%
+   mutate(czpct = round((case/7202*100), 0))
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(30,70)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df, aes(x = 50,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                color = "#222222")
Error in FUN(X[[i]], ...) : object 'czpct' not found
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(30,70)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 50,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 50,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                color = "#222222")
> df2
# A tibble: 10 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2    64
 2 2021-03-15 Croatia  1112. HR          16.4     45.1    15
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1    33
 4 2021-03-15 Austria  2052. AT          14.1     47.6    28
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7    36
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7   100
 7 2021-03-15 Poland   3077. PL          19.4     52.1    43
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0    20
 9 2021-03-15 Romania  1670. RO          25.0     45.9    23
10 2021-03-15 Hungary  5743. HU          19.4     47.2    80
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 50,
+                               y = Latitude,
+                               yend = Latitude,
+                               xend = 50 + czpct),
+                color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 40 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 40,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 40 + czpct),
+                color = "#222222")
> df2 <- df %>%
+   mutate(czpct = round((case/7202*10), 0))
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 40 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 40,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 40 + czpct),
+                color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 80), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "#222222")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 3)
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2)
> df2
# A tibble: 10 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2     6
 2 2021-03-15 Croatia  1112. HR          16.4     45.1     2
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1     3
 4 2021-03-15 Austria  2052. AT          14.1     47.6     3
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7     4
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7    10
 7 2021-03-15 Poland   3077. PL          19.4     52.1     4
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0     2
 9 2021-03-15 Romania  1670. RO          25.0     45.9     2
10 2021-03-15 Hungary  5743. HU          19.4     47.2     8
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + cztpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "#606060") 
Error in FUN(X[[i]], ...) : object 'cztpct' not found
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "#606060") 
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "#606060") +
+   annotate(geom = "text", x = 10, y = 32,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n blabla",
+            size = 2,
+            color = "#606060")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 10, y = 32,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n blabla",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 10, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n blabla",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.7, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 25, y = 43,
+            label = "*Average rate of COVID-19 spread\n as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 27, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 32, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 32, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red")
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 32, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red") +
+   scale_x_continuous(breaks = c(50, 60,70),
+                      labels = c("0% \nSolar energy*", "5%","10%")) 
Error: Breaks and labels along x direction are different lengths
Run `rlang::last_error()` to see where the error occurred.
> rlang::last_error()
<error/rlang_error>
Breaks and labels along x direction are different lengths
Backtrace:
  1. (function (x, ...) ...
  2. ggplot2:::print.ggplot(x)
  4. ggplot2:::ggplot_build.ggplot(x)
  5. layout$setup_panel_params()
  6. ggplot2:::f(..., self = self)
  7. base::Map(setup_panel_params, scales_x, scales_y)
  8. base::mapply(FUN = f, ..., SIMPLIFY = FALSE)
 10. self$coord$setup_panel_params(scale_x, scale_y, params = self$coord_params)
 11. ggplot2:::f(..., self = self)
 12. self$fixup_graticule_labels(graticule, scale_x, scale_y, params)
 13. ggplot2:::f(..., self = self)
Run `rlang::last_trace()` to see the full context.
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 32, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red") +
+   scale_x_continuous(breaks = c(45, 50, 60),
+                      labels = c("0% \nSolar energy*", "5%","10%"))
> grep("Moldova", world$name_en, value = TRUE)
[1] "Moldova"
> cntrs <- jhu %>%
+   filter(date == "2021-03-15") %>%
+   select(date, Serbia, Croatia, Slovenia, Austria, Slovakia, Czechia, Poland, Ukraine, Moldova, Romania, Hungary) %>%
+   pivot_longer(Serbia:Hungary, names_to = "country", values_to = "case")
> cntrs
# A tibble: 11 x 3
   date       country   case
   <chr>      <chr>    <dbl>
 1 2021-03-15 Serbia   4612.
 2 2021-03-15 Croatia  1112.
 3 2021-03-15 Slovenia 2357.
 4 2021-03-15 Austria  2052.
 5 2021-03-15 Slovakia 2596.
 6 2021-03-15 Czechia  7202.
 7 2021-03-15 Poland   3077.
 8 2021-03-15 Ukraine  1405.
 9 2021-03-15 Moldova  2410.
10 2021-03-15 Romania  1670.
11 2021-03-15 Hungary  5743.
> centroids$country <- countrycode(centroids$iso_a2,
+             origin = "iso2c",
+             destination = "iso.name.en")
Warning message:
In countrycode(centroids$iso_a2, origin = "iso2c", destination = "iso.name.en") :
  Some values were not matched unambiguously: -99

> df <- cntrs %>%
+   left_join(centroids, by = "country")
> df2 <- df %>%
+   mutate(czpct = round((case/7202*10), 0))
> world$name_en[world$name_en == "Czech Republic"] <- "Czechia"
> ggplot() +
+   geom_sf(data = world %>% filter(name_en %in% cntrs$country),fill = "#eff7fa") +
+   coord_sf(xlim = c(5, 60), ylim = c(40, 60)) +
+   geom_point(data = df2,
+              aes(x = Longitude,
+                  y = Latitude, color = czpct)) +
+   geom_segment(data = df2, aes(x = Longitude,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                alpha = 0.6, linetype = "dashed",
+                color = "black") +
+   geom_segment(data = df2, aes(x = 45,
+                                y = Latitude,
+                                yend = Latitude,
+                                xend = 45 + czpct),
+                color = "red", size = 2) +
+   geom_text(data = df2,
+             aes(x = 45 + czpct,
+                 y = Latitude,
+                 label = iso_a2,
+                 vjust = 0),
+             hjust = 0, size = 2.5,
+             color = "black") +
+   annotate(geom = "text", x = 32, y = 42,
+            label = "*Average rate of COVID-19 spread as percentage of CZ data\n 2021-03-15",
+            size = 2,
+            color = "red") +
+   scale_x_continuous(breaks = c(45, 50, 60),
+                      labels = c("0% \nSolar energy*", "5%","10%"))
Warning messages:
1: Removed 1 rows containing missing values (geom_point). 
2: Removed 1 rows containing missing values (geom_segment). 
3: Removed 1 rows containing missing values (geom_segment). 
4: Removed 1 rows containing missing values (geom_text). 
> df2
# A tibble: 11 x 7
   date       country   case iso_a2 Longitude Latitude czpct
   <chr>      <chr>    <dbl> <chr>      <dbl>    <dbl> <dbl>
 1 2021-03-15 Serbia   4612. RS          20.8     44.2     6
 2 2021-03-15 Croatia  1112. HR          16.4     45.1     2
 3 2021-03-15 Slovenia 2357. SI          14.8     46.1     3
 4 2021-03-15 Austria  2052. AT          14.1     47.6     3
 5 2021-03-15 Slovakia 2596. SK          19.5     48.7     4
 6 2021-03-15 Czechia  7202. CZ          15.3     49.7    10
 7 2021-03-15 Poland   3077. PL          19.4     52.1     4
 8 2021-03-15 Ukraine  1405. UA          31.4     49.0     2
 9 2021-03-15 Moldova  2410. NA          NA       NA       3
10 2021-03-15 Romania  1670. RO          25.0     45.9     2
11 2021-03-15 Hungary  5743. HU          19.4     47.2     8
> centroids$country
  [1] "Aruba"                                        "Afghanistan"                                 
  [3] "Angola"                                       "Anguilla"                                    
  [5] "Albania"                                      "Åland Islands"                               
  [7] "Andorra"                                      "United Arab Emirates (the)"                  
  [9] "Argentina"                                    "Armenia"                                     
 [11] "American Samoa"                               "Antarctica"                                  
 [13] NA                                             "French Southern Territories (the)"           
 [15] "Antigua and Barbuda"                          "Australia"                                   
 [17] "Austria"                                      "Azerbaijan"                                  
 [19] "Burundi"                                      "Belgium"                                     
 [21] "Benin"                                        "Burkina Faso"                                
 [23] "Bangladesh"                                   "Bulgaria"                                    
 [25] "Bahrain"                                      "Canada"                                      
 [27] "Bahamas (the)"                                "Bosnia and Herzegovina"                      
 [29] "Saint Barthélemy"                             "Belarus"                                     
 [31] "Belize"                                       "Bermuda"                                     
 [33] "Bolivia (Plurinational State of)"             "Brazil"                                      
 [35] "Barbados"                                     "Brunei Darussalam"                           
 [37] "Bhutan"                                       "Botswana"                                    
 [39] "Central African Republic (the)"               "Switzerland"                                 
 [41] "Chile"                                        "China"                                       
 [43] "Côte d'Ivoire"                                "Cameroon"                                    
 [45] "Congo (the Democratic Republic of the)"       "Congo (the)"                                 
 [47] "Cook Islands (the)"                           "Colombia"                                    
 [49] "Comoros (the)"                                "Cabo Verde"                                  
 [51] "Costa Rica"                                   "Cuba"                                        
 [53] "Curaçao"                                      "Cayman Islands (the)"                        
 [55] NA                                             "Cyprus"                                      
 [57] "Czechia"                                      "Germany"                                     
 [59] "Djibouti"                                     "Dominica"                                    
 [61] "Denmark"                                      "Dominican Republic (the)"                    
 [63] "Algeria"                                      "Ecuador"                                     
 [65] "Egypt"                                        "Eritrea"                                     
 [67] "Spain"                                        "Estonia"                                     
 [69] "Ethiopia"                                     "Finland"                                     
 [71] "Fiji"                                         "Falkland Islands (the) [Malvinas]"           
 [73] "France"                                       "Faroe Islands (the)"                         
 [75] "Micronesia (Federated States of)"             "Gabon"                                       
 [77] "United Kingdom"                               "Georgia"                                     
 [79] "Guernsey"                                     "Ghana"                                       
 [81] "Guinea"                                       "Gambia (the)"                                
 [83] "Guinea-Bissau"                                "Equatorial Guinea"                           
 [85] "Greece"                                       "Grenada"                                     
 [87] "Greenland"                                    "Guatemala"                                   
 [89] "Guam"                                         "Guyana"                                      
 [91] "Hong Kong"                                    "Heard Island and McDonald Islands"           
 [93] "Honduras"                                     "Croatia"                                     
 [95] "Haiti"                                        "Hungary"                                     
 [97] "Indonesia"                                    "Isle of Man"                                 
 [99] "India"                                        NA                                            
[101] "British Indian Ocean Territory (the)"         "Ireland"                                     
[103] "Iran (Islamic Republic of)"                   "Iraq"                                        
[105] "Iceland"                                      "Israel"                                      
[107] "Italy"                                        "Jamaica"                                     
[109] "Jersey"                                       "Jordan"                                      
[111] "Japan"                                        NA                                            
[113] "Kazakhstan"                                   "Kenya"                                       
[115] "Kyrgyzstan"                                   "Cambodia"                                    
[117] "Kiribati"                                     "Saint Kitts and Nevis"                       
[119] "Korea (the Republic of)"                      NA                                            
[121] "Kuwait"                                       "Lao People's Democratic Republic (the)"      
[123] "Lebanon"                                      "Liberia"                                     
[125] "Libya"                                        "Saint Lucia"                                 
[127] "Liechtenstein"                                "Sri Lanka"                                   
[129] "Lesotho"                                      "Lithuania"                                   
[131] "Luxembourg"                                   "Latvia"                                      
[133] "Macao"                                        "Saint Martin (French part)"                  
[135] "Morocco"                                      "Monaco"                                      
[137] "Moldova (the Republic of)"                    "Madagascar"                                  
[139] "Maldives"                                     "Mexico"                                      
[141] "Marshall Islands (the)"                       "North Macedonia"                             
[143] "Mali"                                         "Malta"                                       
[145] "Myanmar"                                      "Montenegro"                                  
[147] "Mongolia"                                     "Northern Mariana Islands (the)"              
[149] "Mozambique"                                   "Mauritania"                                  
[151] "Montserrat"                                   "Mauritius"                                   
[153] "Malawi"                                       "Malaysia"                                    
[155] NA                                             "New Caledonia"                               
[157] "Niger (the)"                                  "Norfolk Island"                              
[159] "Nigeria"                                      "Nicaragua"                                   
[161] "Niue"                                         "Netherlands (the)"                           
[163] "Norway"                                       "Nepal"                                       
[165] "Nauru"                                        "New Zealand"                                 
[167] "Oman"                                         "Pakistan"                                    
[169] "Panama"                                       "Pitcairn"                                    
[171] "Peru"                                         "Philippines (the)"                           
[173] "Palau"                                        "Papua New Guinea"                            
[175] "Poland"                                       "Puerto Rico"                                 
[177] "Korea (the Democratic People's Republic of)"  "Portugal"                                    
[179] "Paraguay"                                     "Palestine, State of"                         
[181] "French Polynesia"                             "Qatar"                                       
[183] "Romania"                                      "Russian Federation (the)"                    
[185] "Rwanda"                                       "Western Sahara"                              
[187] "Saudi Arabia"                                 "Sudan (the)"                                 
[189] "South Sudan"                                  "Senegal"                                     
[191] "Singapore"                                    "South Georgia and the South Sandwich Islands"
[193] "Saint Helena, Ascension and Tristan da Cunha" "Solomon Islands"                             
[195] "Sierra Leone"                                 "El Salvador"                                 
[197] "San Marino"                                   NA                                            
[199] "Somalia"                                      "Saint Pierre and Miquelon"                   
[201] "Serbia"                                       "Sao Tome and Principe"                       
[203] "Suriname"                                     "Slovakia"                                    
[205] "Slovenia"                                     "Sweden"                                      
[207] "Eswatini"                                     "Sint Maarten (Dutch part)"                   
[209] "Seychelles"                                   "Syrian Arab Republic (the)"                  
[211] "Turks and Caicos Islands (the)"               "Chad"                                        
[213] "Togo"                                         "Thailand"                                    
[215] "Tajikistan"                                   "Turkmenistan"                                
[217] "Timor-Leste"                                  "Tonga"                                       
[219] "Trinidad and Tobago"                          "Tunisia"                                     
[221] "Turkey"                                       "Taiwan (Province of China)"                  
[223] "Tanzania, the United Republic of"             "Uganda"                                      
[225] "Ukraine"                                      "Uruguay"                                     
[227] "United States of America (the)"               "Uzbekistan"                                  
[229] "Holy See (the)"                               "Saint Vincent and the Grenadines"            
[231] "Venezuela (Bolivarian Republic of)"           "Virgin Islands (British)"                    
[233] "Virgin Islands (U.S.)"                        "Viet Nam"                                    
[235] "Vanuatu"                                      "Wallis and Futuna"                           
[237] "Samoa"                                        "Yemen"                                       
[239] "South Africa"                                 "Zambia"                                      
[241] "Zimbabwe"                                    
> 
